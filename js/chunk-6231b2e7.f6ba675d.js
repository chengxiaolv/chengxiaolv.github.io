(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6231b2e7"],{"131b":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"complaint-suggestion"},["-1"!=e.$authority.indexOf("adviseTable")?a("div",{staticClass:"search-list"},[a("el-row",[a("el-col",{attrs:{span:18}},[a("el-col",{attrs:{span:1}},[e._v("项目")]),a("el-col",{attrs:{span:4}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择项目"},on:{change:e.getComplainPage},model:{value:e.sOrgId,callback:function(t){e.sOrgId=t},expression:"sOrgId"}},e._l(e.project,function(e){return a("el-option",{key:e.orgId,attrs:{label:e.orgName,value:e.orgId}})}),1)],1),a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:2}},[e._v("发布时间")]),a("el-col",{attrs:{span:8}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetimerange","default-time":["00:00:00","23:59:59"],"range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.aTimeStartEnd,callback:function(t){e.aTimeStartEnd=t},expression:"aTimeStartEnd"}})],1),a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:2}},[e._v("状态")]),a("el-col",{attrs:{span:4}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择状态"},model:{value:e.iState,callback:function(t){e.iState=t},expression:"iState"}},e._l(e.complainList,function(e){return a("el-option",{key:e.val,attrs:{label:e.text,value:e.val}})}),1)],1)],1),a("el-col",{staticClass:"disp-right",attrs:{span:6}},["-1"!=e.$authority.indexOf("adviseTable")?a("el-button",{staticClass:"el-button el-button--primary",on:{click:e.getComplainPage}},[e._v("查询")]):e._e(),e._e(),e._e()],1)],1)],1):e._e(),"-1"!=e.$authority.indexOf("adviseTable")?a("div",{staticClass:"content-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.aComplaintTabeData,border:""}},[a("el-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"80"}}),a("el-table-column",{attrs:{prop:"orgName",align:"center",label:"所在项目"}}),a("el-table-column",{attrs:{prop:"roomName",align:"center",label:"房号"}}),a("el-table-column",{attrs:{prop:"createrAppUserName",align:"center",label:"提单人"}}),a("el-table-column",{attrs:{prop:"createrAppUserPhone",align:"center",label:"提单人手机号"}}),a("el-table-column",{attrs:{prop:"complainTypeEnum.text",align:"center",label:"服务类型"}}),a("el-table-column",{attrs:{prop:"complainStateEnum.text",align:"center",label:"状态"}}),a("el-table-column",{attrs:{prop:"replyContent",align:"center",label:"回复内容"}}),a("el-table-column",{attrs:{prop:"replySysUserName",align:"center",label:"回复人员"}}),a("el-table-column",{attrs:{prop:"replyTime",align:"center",label:"回复时间"}}),a("el-table-column",{attrs:{prop:"address",align:"center",width:"160",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[1!=t.row.state&&"-1"!=e.$authority.indexOf("adviseLabel")?a("span",{staticClass:"greenFont tabOperteBtn",on:{click:function(a){return e.RemarkComplaint("show",t.row)}}},[e._v("备注")]):e._e()]}}],null,!1,2907838545)})],1)],1):e._e(),a("div",{staticClass:"el-page"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[10,20,40,50],"page-size":100,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e.dialogComfirmAdvise?a("div",{staticClass:"my-puple"},[a("el-dialog",{attrs:{title:"确认回复投诉建议",visible:e.dialogComfirmAdvise,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"660px","before-close":function(){return e.dialogComfirmAdvise=!1}},on:{"update:visible":function(t){e.dialogComfirmAdvise=t}}},[a("div",{staticClass:"my-puple-contract mb-10"},[a("el-row",{staticStyle:{"font-size":"14px"}},[a("el-col",{staticClass:"is-required-a",attrs:{span:3}},[e._v("内容")]),a("el-col",{attrs:{span:18}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入回复内容(含50个字以内)"},model:{value:e.sComplaintResponse,callback:function(t){e.sComplaintResponse=t},expression:"sComplaintResponse"}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.RemarkComplaint("send")}}},[e._v("确定")]),a("el-button",{staticClass:"greenBtn",on:{click:function(t){e.dialogComfirmAdvise=!1}}},[e._v("取消")])],1)])],1):e._e(),e.dialogVisibleSupport?a("div",{staticClass:"my-puple"},[a("el-dialog",{attrs:{title:"添加供应商",visible:e.dialogVisibleSupport,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"660px","before-close":function(){return e.dialogVisibleSupport=!1}},on:{"update:visible":function(t){e.dialogVisibleSupport=t}}},[a("el-row",[a("el-row",{staticClass:"each-item"},[a("el-col",{staticClass:"is-required-a",attrs:{span:8}},[e._v("供应商名称")]),a("el-col",{attrs:{span:12}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入供应商名称",clearable:""},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)],1),a("el-row",{staticClass:"each-item"},[a("el-col",{staticClass:"is-required-a",attrs:{span:8}},[e._v("服务类型")]),a("el-col",{attrs:{span:12}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择服务类型"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),a("el-row",{staticClass:"each-item"},[a("el-col",{staticClass:"is-required-a",attrs:{span:8}},[e._v("供应商联系人")]),a("el-col",{attrs:{span:12}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入供应商联系人",clearable:""},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)],1),a("el-row",{staticClass:"each-item"},[a("el-col",{staticClass:"is-required-a",attrs:{span:8}},[e._v("供应商联系人手机号")]),a("el-col",{attrs:{span:12}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入供应商联系人手机号",clearable:""},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)],1),a("el-row",{staticClass:"each-item"},[a("el-col",{staticClass:"is-required-a",attrs:{span:8}},[e._v("供应商地址")]),a("el-col",{attrs:{span:12}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入供应商地址(30字以内)",clearable:""},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)],1),a("el-row",{staticClass:"each-item"},[a("el-col",{attrs:{span:8}},[e._v("供应商服务内容")]),a("el-col",{attrs:{span:12}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入供应商服务内容(50字以内)",clearable:""},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisibleSupport=!1}}},[e._v("确 定")]),a("el-button",{staticClass:"greenBtn",on:{click:function(t){e.dialogVisibleSupport=!1}}},[e._v("取 消")])],1)],1)],1):e._e(),e.dialogVisibleSupports?a("div",{staticClass:"my-puple"},[a("el-dialog",{attrs:{title:"供应商列表",visible:e.dialogVisibleSupports,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"1200px","before-close":function(){return e.dialogVisibleSupports=!1}},on:{"update:visible":function(t){e.dialogVisibleSupports=t}}},[a("div",{staticClass:"padding: 20px 30px;"},[a("el-table",{key:"look-puple",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"80"}}),a("el-table-column",{attrs:{prop:"name",align:"center",label:"供应商名称"}}),a("el-table-column",{attrs:{prop:"address",align:"center",label:"维修次数(含进行中)"}}),a("el-table-column",{attrs:{prop:"outLine",align:"center",label:"服务类型"}}),a("el-table-column",{attrs:{prop:"address",align:"center",label:"服务内容"}}),a("el-table-column",{attrs:{prop:"address",align:"center",label:"供应商地址"}}),a("el-table-column",{attrs:{prop:"address",align:"center",label:"联系人"}}),a("el-table-column",{attrs:{prop:"address",align:"center",label:"联系人人手机号"}}),a("el-table-column",{attrs:{prop:"address",align:"center",label:"更新时间"}}),a("el-table-column",{attrs:{prop:"address",align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"greenFont tabOperteBtn",on:{click:function(t){e.dialogVisibleSupport=!0}}},[e._v("编辑")])]}}],null,!1,3238152318)})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"greenBtn",on:{click:function(t){e.dialogVisibleSupports=!1}}},[e._v("取 消")])],1)])],1):e._e()])},s=[],i=(a("591a"),a("729c")),o=a("f24a"),n=a.n(o),r={name:"complaint-suggestion",components:{VueUeditorWrap:n.a},data(){return{options:[{value:"选项1",label:"黄金糕"},{value:"选项2",label:"双皮奶"}],value:"",value1:[],radio2:1,tableData:[],dialogComfirmAdvise:!1,dialogVisibleSupport:!1,dialogVisibleSupports:!1,aComplaintTabeData:[],currentPage:1,iPageSize:10,sOrgId:"",aTimeStartEnd:null,iState:"",complainList:[],total:0,sComplaintResponse:"",sComplaintId:"",project:[]}},created(){this.init()},mounted(){},computed:{},methods:{RemarkComplaint(e,t={}){try{let l=this;if("show"===e)l.sComplaintResponse=t.replyContent,l.sComplaintId=t.id,l.dialogComfirmAdvise=!0;else{if(!l.sComplaintResponse)return void l.$message({message:"内容不能为空",type:"warning"});let e={id:l.sComplaintId,replyContent:l.sComplaintResponse};Object(i["Gb"])(e).then(e=>{e.data.result?(l.$message({message:e.data.message,type:"success"}),l.getComplainPage(),l.dialogComfirmAdvise=!1):l.$message.error(e.data.message)})}}catch(a){console.log(a)}},getComplainPage(){if(!(this.project.length<=0))try{let t=this,a={currentPage:t.currentPage,pageSize:t.pageSize,orgId:t.sOrgId,state:t.iState};t.aTimeStartEnd&&(a.startCreateTime=t.aTimeStartEnd[0],a.endCreateTime=t.aTimeStartEnd[1]),Object(i["U"])(a).then(e=>{this.aComplaintTabeData=e.data.data.content,this.total=e.data.data.total})}catch(e){console.log(e)}},getComplainState(){Object(i["V"])().then(e=>{this.complainList=e.data.data})},getproj(){this.$http.get("/api/bill/getOrgList").then(e=>{e.data.data.length>0&&(this.project=e.data.data,this.project.unshift({orgName:"全部",orgId:""}))}).then(()=>{this.project.length>0&&(this.getComplainPage(),this.getComplainState())}).catch(e=>{console.log(e)})},init(){this.getproj()},handleSizeChange(e){this.currentPage=1,this.iPageSize=e,this.getComplainPage(),console.log(`每页 ${e} 条`)},handleCurrentChange(e){this.currentPage=e,this.getComplainPage(),console.log(`当前页: ${e}`)}}},c=r,p=(a("6fc1"),a("6691")),d=Object(p["a"])(c,l,s,!1,null,null,null);t["default"]=d.exports},"4c11":function(e,t,a){},"6fc1":function(e,t,a){"use strict";var l=a("4c11"),s=a.n(l);s.a}}]);