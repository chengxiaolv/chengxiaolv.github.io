(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-15512961"],{2163:function(e,t,a){},"387f":function(e,t,a){"use strict";var l=a("2163"),s=a.n(l);s.a},"3d98":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"equipment-config"},["main"==e.showType?a("div",{staticClass:"main-container"},[a("div",{directives:[{name:"show",rawName:"v-show",value:"-1"!=e.$authority.indexOf("brandTable"),expression:"$authority.indexOf('brandTable') != '-1'"}],staticClass:"search-list"},[a("el-row",[a("el-col",{attrs:{span:5}},[a("el-col",{attrs:{span:6}},[e._v("设备名称")]),a("el-col",{attrs:{span:18}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入设备名称"},model:{value:e.sEquipmentName,callback:function(t){e.sEquipmentName=t},expression:"sEquipmentName"}})],1)],1),a("el-col",{staticClass:"disp-right pr-10",attrs:{span:19}},["-1"!=e.$authority.indexOf("brandTable")?a("el-button",{staticClass:"el-button el-button--primary",on:{click:e.getDeviceCategoryList}},[e._v("查询")]):e._e(),"-1"!=e.$authority.indexOf("insertBrand")?a("el-button",{staticClass:"el-button el-button--primary",on:{click:e.addBrand}},[e._v("添加品牌")]):e._e()],1)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"-1"!=e.$authority.indexOf("brandTable"),expression:"$authority.indexOf('brandTable') != '-1'"}],staticClass:"content-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData1,border:""},on:{"cell-click":e.cellclick}},[a("el-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"80"}}),a("el-table-column",{attrs:{prop:"name",align:"center",label:"名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"greenFont tabOperteBtn",on:{click:function(a){return e.clickShowType(t)}}},[e._v(e._s(t.row.name))])]}}],null,!1,857561733)}),a("el-table-column",{attrs:{prop:"deviceNum",align:"center",label:"设备数"}}),a("el-table-column",{attrs:{prop:"onlineNum",align:"center",label:"在线数"}}),a("el-table-column",{attrs:{prop:"offlineNum",align:"center",label:"离线数"}}),a("el-table-column",{attrs:{prop:"deviceTypeName",align:"center",label:"设备类型"}}),a("el-table-column",{attrs:{prop:"deviceBrandName",align:"center",label:"设备品牌"}}),a("el-table-column",{attrs:{prop:"creater",align:"center",label:"添加人"}}),a("el-table-column",{attrs:{prop:"createTime",align:"center",label:"添加时间"}}),a("el-table-column",{attrs:{prop:"address",align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return["-1"!=e.$authority.indexOf("editBrand")?a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("修改")]):e._e(),"-1"!=e.$authority.indexOf("brandImport")?a("span",{staticClass:"equip"},[a("el-upload",{staticClass:"upload-demo",attrs:{accept:".xlsx",data:{deviceCategoryId:e.clickRowData.deviceCategotyId},action:"/api/deviceDeploy/batchDevice","show-file-list":!1,"on-success":e.beforeAvatarUpload}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("批量导入")])],1)],1):e._e()]}}],null,!1,307218648)})],1)],1)]):e._e(),"name"==e.showType?a("div",{staticClass:"name-container"},[a("div",{staticClass:"search-list"},[a("el-row",[a("el-col",{attrs:{span:16}},[a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:1}},[e._v("\n                        项目\n                    ")]),a("el-col",{attrs:{span:3}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:function(t){e.changePorject,e.clickShowType("serchbtn")}},model:{value:e.sProjectvalue,callback:function(t){e.sProjectvalue=t},expression:"sProjectvalue"}},e._l(e.oNewgetPeojectList,function(e){return a("el-option",{key:e.orgType_id,attrs:{label:e.orgName,value:e.orgType_id}})}),1)],1),a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:1}},[e._v("\n                        房号\n                    ")]),a("el-col",{attrs:{span:3}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择"},model:{value:e.sRoomNumber,callback:function(t){e.sRoomNumber=t},expression:"sRoomNumber"}},e._l(e.aRoomNumberOpentions3,function(e){return a("el-option",{key:e.roomId,attrs:{label:e.roomName,value:e.roomId}})}),1)],1),a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:1}},[e._v("\n                        状态\n                    ")]),a("el-col",{attrs:{span:3}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择"},model:{value:e.sState,callback:function(t){e.sState=t},expression:"sState"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:3}},[e._v("\n                            设备序列号\n                        ")]),a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:"请输入设备序列号"},model:{value:e.sEriesNumber,callback:function(t){e.sEriesNumber=t},expression:"sEriesNumber"}})],1)],1),a("el-col",{staticClass:"disp-right",attrs:{span:5}},["-1"!=e.$authority.indexOf("deviceTable")?a("el-button",{staticClass:"el-button el-button--primary",on:{click:function(t){return e.clickShowType("serchbtn")}}},[e._v("查询")]):e._e(),"-1"!=e.$authority.indexOf("insertDevice")?a("el-button",{staticClass:"el-button el-button--primary",on:{click:e.addClassEqu}},[e._v("添加设备")]):e._e(),"-1"!=e.$authority.indexOf("downloadTemp")?a("el-button",{staticClass:"greenBtn",on:{click:e.downloadTemplate}},[e._v("下载模板")]):e._e()],1),"-1"!=e.$authority.indexOf("deviceImport")?a("el-col",{staticStyle:{"margin-left":"10px"},attrs:{span:2}},[a("span",{on:{click:e.exportTemplateDatas}},[a("el-upload",{staticClass:"upload-demo",attrs:{accept:".xlsx",data:{deviceCategoryId:e.clickRowData.deviceCategotyId},action:"/api/deviceDeploy/batchDevice","show-file-list":!1,"on-success":e.beforeAvatarUpload}},[a("el-button",{attrs:{type:"primary"}},[e._v("批量导入")])],1)],1)]):e._e()],1)],1),"-1"!=e.$authority.indexOf("deviceTable")?a("div",{staticClass:"content-table"},[a("el-table",{key:"name",staticStyle:{width:"100%"},attrs:{data:e.ClassTableData,border:""},on:{"cell-click":e.cellclickClass}},[a("el-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"80"}}),a("el-table-column",{attrs:{prop:"deviceNo",align:"center",label:"设备序列号"}}),a("el-table-column",{attrs:{prop:"statusName",align:"center",label:"状态"}}),a("el-table-column",{attrs:{prop:"deviceModel",align:"center",label:"设备型号"}}),a("el-table-column",{attrs:{prop:"address",align:"center",label:"关联地址"}}),a("el-table-column",{attrs:{prop:"updaterName",align:"center",label:"编辑人"}}),a("el-table-column",{attrs:{prop:"updateTime",align:"center",label:"编辑时间"}}),a("el-table-column",{attrs:{prop:"address",align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return["-1"!=e.$authority.indexOf("deviceDelete")?a("span",{staticClass:"greenFont tabOperteBtn"},[e._v("删除")]):e._e(),"-1"!=e.$authority.indexOf("editDevice")?a("span",{staticClass:"greenFont tabOperteBtn"},[e._v("修改")]):e._e()]}}],null,!1,1071385858)})],1)],1):e._e(),a("div",{staticClass:"el-page"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[10,20,40,50],"page-size":100,layout:"total, sizes, prev, pager, next, jumper",total:e.ClassTableDataTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("div",{staticClass:"deep-bottom-box"},[a("el-button",{staticClass:"greenBtn",on:{click:function(t){e.showType="main",e.currentPage=1,e.iPageSize=10}}},[e._v("返 回")])],1)]):e._e(),"export"==e.showType?a("div",{staticClass:"export-container"},[a("div",{staticClass:"export-tab",on:{click:e.exportTab}},[a("el-tabs",{model:{value:e.activeName2,callback:function(t){e.activeName2=t},expression:"activeName2"}},[a("el-tab-pane",{attrs:{label:"数据正常",name:"normalList"}}),a("el-tab-pane",{attrs:{label:"数据为空",name:"emptyList"}}),a("el-tab-pane",{attrs:{label:"数据异常",name:"errorList"}})],1)],1),a("div",{staticClass:"content-table my-table-strip"},[a("el-table",{key:"export",staticStyle:{width:"100%"},attrs:{data:e.newTemplateDatasArr,stripe:!0}},[a("el-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"80"}}),a("el-table-column",{attrs:{prop:"orgName",align:"center",label:"小区名称"}}),a("el-table-column",{attrs:{prop:"roomName",align:"center",label:"房间名称"}}),a("el-table-column",{attrs:{prop:"deviceNo",align:"center",label:"设备序列号"}}),a("el-table-column",{attrs:{prop:"deviceName",align:"center",label:"设备名称"}}),a("el-table-column",{attrs:{prop:"deviceModel",align:"center",label:"设备型号"}}),a("el-table-column",{attrs:{prop:"roomName",align:"center",label:"房号"}}),a("el-table-column",{attrs:{prop:"errorInfo",align:"center",label:"错误信息"}})],1)],1),a("div",{staticClass:"el-page"},[a("el-pagination",{attrs:{background:"","current-page":e.exporcurrentPage,"page-sizes":[5,10,20,30,40,50],"page-size":100,layout:"total, sizes, prev, pager, next, jumper",total:e.exporttotal},on:{"size-change":e.exporthandleSizeChange,"current-change":e.exporhandleCurrentChange}})],1),a("div",{staticClass:"deep-bottom-box"},[a("el-button",{attrs:{type:"primary"},on:{click:e.batchUpload}},[e._v("确 定")]),a("el-button",{staticClass:"greenBtn",on:{click:function(t){e.showType="main"}}},[e._v("取 消")])],1)]):e._e(),e.dialogVisible?a("div",{staticClass:"my-puple"},[a("el-dialog",{attrs:{title:e.sModeTitle,visible:e.dialogVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"660px","before-close":function(){e.dialogVisible=!1}},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-row",[a("el-row",{staticClass:"each-item"},[a("el-col",{staticClass:"is-required-a",attrs:{span:8}},[e._v("名称")]),a("el-col",{attrs:{span:12}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入设备名称",clearable:""},model:{value:e.clickRowData.name,callback:function(t){e.$set(e.clickRowData,"name",t)},expression:"clickRowData.name"}})],1)],1),a("el-row",{staticClass:"each-item"},[a("el-col",{staticClass:"is-required-a",attrs:{span:8}},[e._v("设备类型")]),a("el-col",{attrs:{span:12}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择设备类型"},model:{value:e.clickRowData.deviceType,callback:function(t){e.$set(e.clickRowData,"deviceType",t)},expression:"clickRowData.deviceType"}},e._l(e.aEquipmentType2,function(e){return a("el-option",{key:e.val,attrs:{label:e.text,value:e.val}})}),1)],1)],1),a("el-row",{staticClass:"each-item"},[a("el-col",{staticClass:"is-required-a",attrs:{span:8}},[e._v("设备品牌")]),a("el-col",{attrs:{span:12}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入设备品牌",clearable:""},model:{value:e.clickRowData.deviceBrandName,callback:function(t){e.$set(e.clickRowData,"deviceBrandName",t)},expression:"clickRowData.deviceBrandName"}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.AlterUpde}},[e._v("确 定")]),a("el-button",{staticClass:"greenBtn",on:{click:e.cancel}},[e._v("取 消")])],1)],1)],1):e._e(),e.dialogVisibleDevice?a("div",{staticClass:"my-puple"},[a("el-dialog",{attrs:{title:e.sModeTitle,visible:e.dialogVisibleDevice,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"660px","before-close":function(){return e.dialogVisibleDevice=!1}},on:{"update:visible":function(t){e.dialogVisibleDevice=t}}},[a("el-row",["add"==e.sModeClickType?a("el-row",{staticClass:"each-item"},[a("el-col",{staticClass:"is-required-a",attrs:{span:8}},[e._v("设备名称")]),a("el-col",{attrs:{span:12}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入设备名称",clearable:""},model:{value:e.aClassClickRowData.name,callback:function(t){e.$set(e.aClassClickRowData,"name",t)},expression:"aClassClickRowData.name"}})],1)],1):e._e(),"upde"!=e.sModeClickType?a("el-row",{staticClass:"each-item"},[a("el-col",{staticClass:"is-required-a",attrs:{span:8}},[e._v("\n                        项目\n                    ")]),a("el-col",{attrs:{span:12}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择"},on:{change:e.changePorject},model:{value:e.sProjectvalue,callback:function(t){e.sProjectvalue=t},expression:"sProjectvalue"}},e._l(e.oNewgetPeojectList,function(e){return a("el-option",{key:e.orgType_id,attrs:{label:e.orgName,value:e.orgType_id}})}),1)],1)],1):e._e(),"upde"!=e.sModeClickType?a("el-row",{staticClass:"each-item"},[a("el-col",{staticClass:"is-required-a",attrs:{span:8}},[e._v("\n                        房间号\n                    ")]),a("el-col",{attrs:{span:12}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择"},model:{value:e.sRoomNumber,callback:function(t){e.sRoomNumber=t},expression:"sRoomNumber"}},e._l(e.aRoomNumberOpentions3,function(e){return a("el-option",{key:e.roomId,attrs:{label:e.roomName,value:e.roomId}})}),1)],1)],1):e._e(),a("el-row",{staticClass:"each-item"},[a("el-col",{staticClass:"is-required-a",attrs:{span:8}},[e._v("设备序列号")]),a("el-col",{attrs:{span:12}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入设备序列号",clearable:""},model:{value:e.aClassClickRowData.deviceNo,callback:function(t){e.$set(e.aClassClickRowData,"deviceNo",t)},expression:"aClassClickRowData.deviceNo"}})],1)],1),"add"!=e.sModeClickType?a("el-row",{staticClass:"each-item"},[a("el-col",{staticClass:"is-required-a",attrs:{span:8}},[e._v("状态")]),a("el-col",{attrs:{span:12}},[a("el-radio-group",{attrs:{disabled:""},model:{value:e.aClassClickRowData.state.value,callback:function(t){e.$set(e.aClassClickRowData.state,"value",t)},expression:"aClassClickRowData.state.value"}},[a("el-radio",{attrs:{label:0}},[e._v("在线")]),a("el-radio",{attrs:{label:1}},[e._v("离线")])],1)],1)],1):e._e(),a("el-row",{staticClass:"each-item"},[a("el-col",{staticClass:"is-required-a",attrs:{span:8}},[e._v("设备型号")]),a("el-col",{attrs:{span:12}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入设备型号",clearable:""},model:{value:e.aClassClickRowData.deviceModel,callback:function(t){e.$set(e.aClassClickRowData,"deviceModel",t)},expression:"aClassClickRowData.deviceModel"}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.AlertClass}},[e._v("确 定")]),a("el-button",{staticClass:"greenBtn",on:{click:e.addEquipmentCallBtn}},[e._v("取 消")])],1)],1)],1):e._e()])},s=[],i=(a("f753"),a("591a")),o=a("90b9"),r=a("729c"),c={name:"equipment-config",data(){return{sEquipmentName:"",aEquipmentName1:[{value:"选项1",label:"黄金糕"},{value:"选项2",label:"双皮奶"}],sEquipmentNameVaule1:"",iEquipmentNumber:0,aEquipmentType2:[],sEquipmentTypeValue2:"",sEquipmentTrademark:"",options:[{value:0,label:"在线"},{value:1,label:"离线"}],Total:400,value:"",value1:[],radio2:1,sLeadinTableData:[{date:"2016-05-02",name:"水表",outLine:"100",address:"1518 弄"},{date:"2016-05-04",name:"电表",outLine:"60",address:"1517 弄"},{date:"2016-05-04",name:"门禁",outLine:"80",address:"1516 弄"}],tableData:[{date:"2016-05-02",name:"水表",outLine:"10",address:"1518 弄"},{date:"2016-05-04",name:"电表",outLine:"6",address:"1517 弄"},{date:"2016-05-04",name:"门禁",outLine:"8",address:"1516 弄"}],tableData1:[],showType:"main",activeName2:"normalList",dialogVisible:!1,dialogVisibleDevice:!1,sModeTitle:"",sModeClickType:"",clickRowData:{name:"",deviceType:"",deviceBrandName:""},clickStoreRowData:{},sCityvalue:"",sProjectvalue:"",sRoomNumber:"",sState:"",sEriesNumber:"",currentPage:1,iPageSize:10,ClassTableData:[],ClassTableDataTotal:0,oNewgetPeojectList:[],aRoomNumberOpentions3:[],aClassClickRowData:{name:"",deviceModel:"",deviceNo:""},getPeojectList:[],addEquId:"",templateDatas:{},templateDatasArr:[],newTemplateDatasArr:[],exporcurrentPage:1,exporttotal:"",exportPageSize:5}},created(){this.init()},computed:{...Object(i["b"])(["gettaCity"])},mounted(){},methods:{batchUpload(){try{let t=this,a=[];if(a=t.templateDatasArr,!(t.templateDatas.emptyList.length<=0&&t.templateDatas.errorList.length<=0))return void t.$message.error("数据中有存在异常项,不可上传!");a=t.templateDatasArr;let l={normalList:a,deviceCategoryId:t.clickRowData.deviceCategotyId};Object(r["m"])(l).then(e=>{e.data.result?(t.$message({message:e.data.message,type:"success"}),t.getDeviceCategoryList(),t.showType="main"):t.$message.error(e.data.message)})}catch(e){console.log(e)}},exportTab(){let e=this;"normalList"===e.activeName2?e.templateDatasArr=e.templateDatas.normalList:"emptyList"===e.activeName2?e.templateDatasArr=e.templateDatas.emptyList:"errorList"===e.activeName2&&(e.templateDatasArr=e.templateDatas.errorList),e.newTemplateDatasArr=[];for(let t=0;t<e.exportPageSize*e.exporcurrentPage;t++){if(t+1>e.templateDatasArr.length)break;if(e.templateDatasArr.length<=0)break;e.newTemplateDatasArr.push(e.templateDatasArr[t])}e.exporttotal=e.newTemplateDatasArr.length},beforeAvatarUpload(e,t,a){try{let t=this;if(e.result){t.templateDatas=e.data,t.activeName2="normalList",t.templateDatasArr=t.templateDatas.normalList,t.newTemplateDatasArr=[];for(let e=0;e<t.exportPageSize*t.exporcurrentPage;e++){if(t.templateDatasArr.length<=0||e>=t.templateDatasArr.length)break;t.newTemplateDatasArr.push(t.templateDatasArr[e])}t.exporttotal=t.templateDatasArr.length,t.showType="export"}else t.$message.error(e.message)}catch(l){console.log(l)}},downloadTemplate(){window.open("/api/assets/devicedeploy/device.xlsx")},deleteDevice(){try{let t=this,a={deviceId:t.aClassClickRowData.deviceId};Object(r["r"])(a).then(e=>{e.data.result?(t.$message({type:"success",message:e.data.message}),t.clickShowType(t.clickRowData.deviceCategotyId)):t.$message.error(e.data.message)})}catch(e){console.log(e)}},exportTemplateDatas(){try{}catch(e){console.log(e)}},classJudge(){let e=this;return e.aClassClickRowData.name?e.sProjectvalue?e.sRoomNumber?e.aClassClickRowData.deviceNo?!!e.aClassClickRowData.deviceModel||(e.$message({message:"MAC地址不能为空",type:"warning"}),!1):(e.$message({message:"设备序列号不能为空",type:"warning"}),!1):(e.$message({message:"房间号不能为空",type:"warning"}),!1):(e.$message({message:"项目不能为空",type:"warning"}),!1):(e.$message({message:"设备名称不能为空",type:"warning"}),!1)},AlertClass(){try{let t=this,a={};if("add"==this.sModeClickType){if(!t.classJudge())return;let e=JSON.parse(JSON.stringify(this.sProjectvalue));e=e.split("~"),a={orgId:e[0],orgType:e[1],deviceCategoryId:t.addEquId,roomId:t.sRoomNumber,deviceNo:t.aClassClickRowData.deviceNo,deviceName:t.aClassClickRowData.name,deviceModel:t.aClassClickRowData.deviceModel},Object(r["e"])(a).then(e=>{e.data.result?(t.$message({message:e.data.message,type:"success"}),t.addProjectListData(),t.sRoomNumber="",t.clickShowType(t.addEquId),t.dialogVisibleDevice=!1):t.$message.error(e.data.message)})}else{if(!t.aClassClickRowData.deviceNo)return void this.$message({message:"设备序列号不能为空",type:"warning"});if(!t.aClassClickRowData.deviceModel)return void this.$message({message:"设备型号不能为空",type:"warning"});a={deviceId:t.aClassClickRowData.deviceId,deviceModel:t.aClassClickRowData.deviceModel,deviceNo:t.aClassClickRowData.deviceNo},r["Nb"],Object(r["Nb"])(a).then(e=>{e.data.result?(t.$message({message:e.data.message,type:"success"}),t.sRoomNumber="",t.clickShowType(t.clickRowData.deviceCategotyId),t.dialogVisibleDevice=!1):t.$message.error(e.data.message)})}}catch(e){console.log(e)}},addClassEqu(){this.sModeClickType="add",this.sModeTitle="添加",this.aClassClickRowData.deviceModel="",this.aClassClickRowData.deviceNo="",this.$set(this.aClassClickRowData,"state",{status:"在线",value:0}),this.aClassClickRowData.name="",this.aClassClickRowData.ekey="",this.aClassClickRowData.mac="",this.aClassClickRowData.address="",this.sProjectvalue="",this.oNewgetPeojectList.splice(0,1),this.dialogVisibleDevice=!0},cellclickClass(e,t,a,l){let s=this;"在线"==e.statusName?e.state={status:e.statusName,value:0}:e.state={status:e.statusName,value:1},s.aClassClickRowData=JSON.parse(JSON.stringify(e)),"修改"==l.target.innerText?(s.sModeClickType="upde",s.sModeTitle=l.target.innerText,s.dialogVisibleDevice=!0):"删除"==l.target.innerText&&s.$confirm("正在执行删除行为, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{s.deleteDevice()})},changeCity(){try{this.$http.get("/api/deviceDeploy/getOrgList").then(e=>{e.data.data.length<=0&&(this.oNewgetPeojectList=[],this.sProjectvalue=""),e.data.data.map((e,t,a)=>{e.orgType_id=`${e.orgId}~${e.orgType}`,2===e.orgType&&(e.orgName=`${e.orgName} (短租)`)}),this.oNewgetPeojectList=JSON.parse(JSON.stringify(e.data.data)),this.oNewgetPeojectList.length>0&&this.addProjectListData()})}catch(e){console.log(e)}},changePorject(){try{if(this.oNewgetPeojectList.length<=0)return!1;this.oNewgetPeojectLists=[];let t=JSON.parse(JSON.stringify(this.sProjectvalue));t=t.split("~");let a={orgId:t[0],orgType:t[1]};this.$http("/api/room/getRoomByOrg",{method:"get",params:a}).then(e=>{this.aRoomNumberOpentions3=JSON.parse(JSON.stringify(e.data.data?e.data.data:[]))}).catch(e=>{console.log(e)})}catch(e){console.log(e)}},clickShowType(e=""){try{let a=this;if(a.oNewgetPeojectList.length<=0)return void this.$message.error("你没有权限访问任何项目");let l="";"serchbtn"==e?l=a.clickRowData.deviceCategotyId:(a.addEquId=e.row?e.row.deviceCategotyId:e,l=e.row?e.row.deviceCategotyId:e);let s=JSON.parse(JSON.stringify(a.sProjectvalue));s=s.split("~"),a.showType="name";let i={deviceCategoryId:l,cityId:a.sCityvalue,orgId:s[0],roomId:a.sRoomNumber,status:a.sState,deviceNo:a.sEriesNumber,currentPage:a.currentPage,orgType:s[1]};Object(r["Y"])(i).then(e=>{a.ClassTableData=e.data.data.content,a.ClassTableData.map((e,t,a)=>{e.updateTime=e.updateTime.replace("T"," ").substr(0,19)}),a.ClassTableDataTotal=e.data.data.total,a.changePorject()})}catch(t){console.log(t)}},cancel(){this.dialogVisible=!1},async addBrand(){try{if(this.sModeClickType="add",this.sModeTitle="添加品牌",this.aEquipmentType2.length<=0){let e=await Object(r["Z"])();this.aEquipmentType2=e.data.data}this.clickRowData.deviceType="",this.clickRowData.name="",this.clickRowData.deviceNum="",this.clickRowData.deviceCategotyId="",this.clickRowData.deviceBrandName="",this.dialogVisible=!0}catch(e){console.log(e)}},async AlterUpde(){try{let t=this,a=null;if(!t.clickRowData.name)return void this.$message({message:"名称不能为空",type:"warning"});if(!t.clickRowData.deviceBrandName)return void this.$message({message:"设备品牌不能为空",type:"warning"});let l={name:this.clickRowData.name,brand:this.clickRowData.deviceBrandName,deviceType:this.clickRowData.deviceType};"add"===t.sModeClickType?(a=await Object(r["f"])(l),a.data.result?t.$message({message:a.data.message,type:"success"}):t.$message.error(a.data.message)):"upde"===t.sModeClickType&&(l.deviceCategoryId=t.clickRowData.deviceCategotyId,a=await Object(r["Lb"])(l),a.data.result?t.$message({message:a.data.message,type:"success"}):t.$message.error(a.data.message)),t.getDeviceCategoryList(),t.dialogVisible=!1}catch(e){console.log(e)}},addProjectListData(){this.oNewgetPeojectList.unshift({orgName:"全部",orgType_id:""})},addEquipmentCallBtn(){this.dialogVisibleDevice=!1,this.sProjectvalue="",this.sRoomNumber="",this.addProjectListData()},async Update(){if(this.aEquipmentType2.length<=0){let e=await Object(r["Z"])();this.aEquipmentType2=e.data.data}this.dialogVisible=!0},cellclick(e,t,a,l){try{this.clickRowData=JSON.parse(JSON.stringify(e)),"修改"==l.target.innerText&&(this.sModeClickType="upde",this.sModeTitle=l.target.innerText,this.Update())}catch(s){console.log(s)}},getDeviceCategoryList(){try{let t=this,a={name:Object(o["m"])(t.sEquipmentName)};Object(r["X"])(a).then(e=>{t.tableData1=JSON.parse(JSON.stringify(e.data.data)),t.tableData1.map((e,t,a)=>{e.createTime=e.createTime.replace("T"," ").substr(0,19)})}).catch(e=>{})}catch(e){console.log(e)}},init(){this.getDeviceCategoryList(),this.changeCity()},exporthandleSizeChange(e){let t=this;t.exportPageSize=e,t.exporcurrentPage=1;let a=t.exporcurrentPage*t.exportPageSize;t.newTemplateDatasArr=[];for(let l=0;l<a;l++){if(l>=t.exporttotal)return;t.newTemplateDatasArr.push(t.templateDatasArr[l])}console.log(a)},exporhandleCurrentChange(e){let t=this;t.exporcurrentPage=e;let a=t.exporcurrentPage*t.exportPageSize;t.newTemplateDatasArr=[];for(let l=0;l<a;l++){if(l>=t.exporttotal)return;t.newTemplateDatasArr.push(t.templateDatasArr[l])}},handleSizeChange(e){this.currentPage=1,this.iPageSize=e,this.clickShowType(this.clickRowData.deviceCategotyId),console.log(`每页 ${e} 条`)},handleCurrentChange(e){this.currentPage=e,this.clickShowType(this.clickRowData.deviceCategotyId),console.log(`当前页: ${e}`)},closeActivePuple(){this.dialogVisible=!1}}},n=c,d=(a("387f"),a("6691")),p=Object(d["a"])(n,l,s,!1,null,null,null);t["default"]=p.exports}}]);