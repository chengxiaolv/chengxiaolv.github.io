(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-54e36cb5"],{"08a7":function(t,e,a){},3438:function(t,e,a){"use strict";var s=a("08a7"),i=a.n(s);i.a},"87f3":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"project-statistics"},[a("div",{staticClass:"search-list"},[a("el-row",[a("el-col",{attrs:{span:4}},[a("el-col",{attrs:{span:4}},[t._v("项目")]),a("el-col",{attrs:{span:18}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:t.findStatisticsxm},model:{value:t.value2,callback:function(e){t.value2=e},expression:"value2"}},t._l(t.projectLilst,function(t){return a("el-option",{key:t.orgId,attrs:{label:t.orgName,value:t.orgId}})}),1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-col",{attrs:{span:3}},[t._v("时间")]),a("el-col",{attrs:{span:21}},[a("el-col",{attrs:{span:10}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"month",placeholder:"开始月份"},model:{value:t.startTime,callback:function(e){t.startTime=e},expression:"startTime"}})],1),a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:2}},[t._v("至")]),a("el-col",{attrs:{span:10}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"month",placeholder:"结束月份"},model:{value:t.endTime,callback:function(e){t.endTime=e},expression:"endTime"}})],1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-col",{attrs:{span:7}},[t._v("短信接收人")]),a("el-col",{attrs:{span:17}},[a("el-input",{attrs:{placeholder:"请输入手机号码或者姓名"},model:{value:t.value3,callback:function(e){t.value3=e},expression:"value3"}})],1)],1),a("el-col",{staticClass:"disp-right",attrs:{span:5,offset:3}},[a("el-button",{staticClass:"el-button el-button--primary",on:{click:t.findStatisticsxm}},[t._v("查询")]),"-1"!=t.$authority.indexOf("smsExport")?a("el-button",{staticClass:"greenBtn",on:{click:t.ForExport}},[t._v("导出")]):t._e()],1)],1)],1),a("div",{staticClass:"content-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{type:"index",align:"center",width:"80",label:"序号"}}),a("el-table-column",{attrs:{prop:"orgName",align:"center",label:"项目"}}),a("el-table-column",{attrs:{prop:"smsName",align:"center",label:"接收人姓名"}}),a("el-table-column",{attrs:{prop:"smsPhone",align:"center",label:"接收人手机号"}}),a("el-table-column",{attrs:{prop:"smsContent",align:"center",width:"400",label:"短信详情"}}),a("el-table-column",{attrs:{prop:"createTime",align:"center",label:"发送时间"}}),a("el-table-column",{attrs:{prop:"sendStateEnum.text",align:"center",width:"110",label:"是否发送成功"}}),a("el-table-column",{attrs:{prop:"receiveStateEnum.text",align:"center",width:"110",label:"是否接收成功"}})],1)],1),a("div",{staticClass:"el-page"},[a("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-sizes":[10,20,30,40,50],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])},i=[],l=a("729c"),n=a("591a"),r={name:"project-statistics",data(){return{startTime:"",endTime:"",currentPage:1,pageSize:10,value1:"",value2:"",value3:"",tableData:[],total:0,projectLilst:[]}},created(){this.init()},mounted(){},computed:{...Object(n["b"])(["gettaCity"])},methods:{clear(){this.projectLilst=[],this.value2=""},getStatisticsOrgList(){this.$http("/api/org/getAllOrgList").then(t=>{this.projectLilst=[],this.projectLilst=JSON.parse(JSON.stringify(t.data.data));var e={orgName:"全部",orgId:""};this.projectLilst.unshift(e)}).then(()=>{this.findStatisticsxm()}).catch(t=>{})},ForExport(){let t={startTime:"",endTime:""};this.startTime&&this.endTime&&(t.startTime=this.startTime,t.endTime=this.endTime),window.open(`/api/smsStatistics/smsStatisticsExport?cityId=${this.value1}&orgId=${this.value2}&startTime=${t.startTime}&endTime=${t.endTime}&nameOrPhone=${this.value3}`)},findStatisticsxm(){let t=this.endTime.slice(0,4),e=this.endTime.slice(5,7),a=this.endTime.slice(0,8),s={cityId:this.value1,orgId:this.value2,startTime:"",endTime:"",nameOrPhone:this.value3,currentPage:this.currentPage,pageSize:this.pageSize};var i=new Date(t,e,0).getDate();this.startTime&&this.endTime&&(s.startTime=this.startTime,s.endTime=`${a}${i}`+" 23:59:59");try{Object(l["I"])(s).then(t=>{t.data.result?(this.tableData=t.data.data.content,this.total=t.data.data.total):this.$message.error(t.data.message)})}catch(n){console.log(n)}},init(){this.getStatisticsOrgList()},handleSizeChange(t){this.currentPage=1,this.pageSize=t,this.findStatisticsxm()},handleCurrentChange(t){this.currentPage=t,this.findStatisticsxm()}}},c=r,o=(a("3438"),a("6691")),d=Object(o["a"])(c,s,i,!1,null,null,null);e["default"]=d.exports}}]);