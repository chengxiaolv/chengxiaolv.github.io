(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5827461f"],{"097e":function(e,t,a){},6573:function(e,t,a){"use strict";var l=a("097e"),s=a.n(l);s.a},"718d":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"service"},[a("div",{staticClass:"search-list"},[a("el-row",[a("el-col",{attrs:{span:18}},[a("el-col",{attrs:{span:1}},[e._v("\n                    项目\n                ")]),a("el-col",{attrs:{span:4}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择项目"},on:{change:e.getWorkPage},model:{value:e.projectvalue,callback:function(t){e.projectvalue=t},expression:"projectvalue"}},e._l(e.project,function(e){return a("el-option",{key:e.orgId,attrs:{label:e.orgName,value:e.orgId}})}),1)],1),a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:2}},[e._v("\n                    发布时间\n                ")]),a("el-col",{attrs:{span:8}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetimerange","default-time":["00:00:00","23:59:59"],"range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.aStartToEnd,callback:function(t){e.aStartToEnd=t},expression:"aStartToEnd"}})],1),a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:2}},[e._v("\n                    状态\n                ")]),a("el-col",{attrs:{span:4}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择状态"},model:{value:e.sSecrhStateValue,callback:function(t){e.sSecrhStateValue=t},expression:"sSecrhStateValue"}},e._l(e.States,function(e){return a("el-option",{key:e.val,attrs:{label:e.text,value:e.val}})}),1)],1)],1),a("el-col",{staticClass:"disp-right",attrs:{span:6}},["-1"!=e.$authority.indexOf("serviceTable")?a("el-button",{staticClass:"el-button el-button--primary",on:{click:e.getWorkPage}},[e._v("查询")]):e._e(),"-1"!=e.$authority.indexOf("serviceSupplier")?a("el-button",{staticClass:"el-button el-button--primary",on:{click:e.getSupplierList}},[e._v("供应商列表")]):e._e(),"-1"!=e.$authority.indexOf("insertSupplier")?a("el-button",{staticClass:"el-button el-button--primary",on:{click:function(t){return e.AddSupplier("addShow")}}},[e._v("添加供应商")]):e._e(),"-1"!=e.$authority.indexOf("editworkIntroduction")?a("el-button",{staticClass:"el-button el-button--primary",on:{click:function(t){return e.Editingservice(e.serverType)}}},[e._v("编辑服务介绍")]):e._e()],1)],1)],1),"-1"!=e.$authority.indexOf("serviceTable")?a("div",{staticClass:"content-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""},on:{"cell-click":e.cellclick}},[a("el-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"80"}}),a("el-table-column",{attrs:{prop:"orgName",align:"center",label:"所在项目"}}),a("el-table-column",{attrs:{prop:"roomName",align:"center",label:"房号"}}),a("el-table-column",{attrs:{prop:"createrUserName",align:"center",label:"提单人"}}),a("el-table-column",{attrs:{prop:"createrUserPhone",align:"center",label:"提单人手机号"}}),a("el-table-column",{attrs:{prop:"supplierTypeEnum.text",align:"center",label:"服务类型"}}),a("el-table-column",{attrs:{prop:"workStateEnum.text",align:"center",label:"状态"}}),a("el-table-column",{attrs:{prop:"cost",align:"center",label:"费用(元)"}}),a("el-table-column",{attrs:{prop:"contactName",align:"center",label:"处理人"}}),a("el-table-column",{attrs:{prop:"contactPhone",align:"center",label:"处理人手机号"}}),a("el-table-column",{attrs:{prop:"createTime",align:"center",label:"报修时间"}}),a("el-table-column",{attrs:{prop:"address",align:"center",width:"160",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[5!=t.row.state?a("div",{attrs:{state:t.row.state}},[0===t.row.state&&"-1"!=e.$authority.indexOf("dispatch")?a("span",{staticClass:"greenFont tabOperteBtn"},[e._v("派单")]):e._e(),0!==t.row.state&&1!==t.row.state&&2!==t.row.state&&3!==t.row.state&&4!==t.row.state||"-1"==e.$authority.indexOf("serviceDetail")?e._e():a("span",{staticClass:"greenFont tabOperteBtn"},[e._v("详情")]),0!==t.row.state&&1!==t.row.state&&2!==t.row.state||"-1"==e.$authority.indexOf("serviceClose")?e._e():a("span",{staticClass:"greenFont tabOperteBtn"},[e._v("关闭")]),1===t.row.state&&"-1"!=e.$authority.indexOf("serviceMoney")?a("span",{staticClass:"greenFont tabOperteBtn",on:{click:e.isSendMoney}},[e._v("提交金额")]):e._e(),3===t.row.state?a("span",{staticClass:"greenFont tabOperteBtn"},[e._v("提交完成")]):e._e(),4===t.row.state&&"-1"!=e.$authority.indexOf("servicePay")?a("span",{staticClass:"greenFont tabOperteBtn"},[e._v("确认付款")]):e._e()]):e._e()]}}],null,!1,848288367)})],1)],1):e._e(),a("div",{staticClass:"el-page"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[10,20,40,50],"page-size":100,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e.dialogReceiveDistribute?a("div",{staticClass:"my-puple"},[a("el-dialog",{attrs:{title:"确定要派单",visible:e.dialogReceiveDistribute,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"660px","before-close":function(){return e.dialogReceiveDistribute=!1}},on:{"update:visible":function(t){e.dialogReceiveDistribute=t}}},[a("div",{staticClass:"my-puple-contract  mb-10"},[a("el-row",{staticClass:"mb-10",staticStyle:{"font-size":"14px"}},[a("el-col",{staticClass:"is-required-a",attrs:{span:4}},[e._v("服务类型")]),a("el-col",{attrs:{span:16}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择服务类型"},on:{change:e.getSupplierListByType},model:{value:e.SupplierTypeValue,callback:function(t){e.SupplierTypeValue=t},expression:"SupplierTypeValue"}},e._l(e.agetSupplierTypes,function(e){return a("el-option",{key:e.val,attrs:{label:e.text,value:e.val}})}),1)],1)],1),a("el-row",{staticStyle:{"font-size":"14px"}},[a("el-col",{staticClass:"is-required-a",attrs:{span:4}},[e._v("服务供应商")]),a("el-col",{attrs:{span:16}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请指派服务的供应商"},on:{change:e.changetypes},model:{value:e.SupplierListByValue,callback:function(t){e.SupplierListByValue=t},expression:"SupplierListByValue"}},e._l(e.SupplierListByType,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),a("p",{directives:[{name:"show",rawName:"v-show",value:""!=e.sSnedordUser.contactName,expression:"sSnedordUser.contactName!=''"}]},[a("el-col",{attrs:{span:4}},[e._v("联系人：")]),a("el-col",{attrs:{span:16}},[a("span",[e._v(e._s(e.sSnedordUser.contactName)+" ")]),a("span",{staticClass:"pl-10"},[e._v(e._s(e.sSnedordUser.contactPhone))])])],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.AlterSendOrders}},[e._v("确定")]),a("el-button",{staticClass:"greenBtn",on:{click:function(t){e.dialogReceiveDistribute=!1}}},[e._v("取消")])],1)])],1):e._e(),e.dialogVisibleClose?a("div",{staticClass:"my-puple"},[a("el-dialog",{attrs:{title:"确认关闭工单",visible:e.dialogVisibleClose,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"660px","before-close":function(){return e.dialogVisibleClose=!1}},on:{"update:visible":function(t){e.dialogVisibleClose=t}}},[a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisibleClose=!1}}},[e._v("确定")]),a("el-button",{staticClass:"greenBtn",on:{click:function(t){e.dialogVisibleClose=!1}}},[e._v("取消")])],1)])],1):e._e(),e.dialogReceiveDetail?a("div",{staticClass:"my-puple"},[a("el-dialog",{attrs:{title:"详情",visible:e.dialogReceiveDetail,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"660px","before-close":function(){return e.dialogReceiveDetail=!1}},on:{"update:visible":function(t){e.dialogReceiveDetail=t}}},[a("div",{staticClass:"my-puple-contract  mb-10"},[a("el-row",[a("el-col",{attrs:{span:4}},[e._v("内容：")]),a("el-col",{attrs:{span:20}},[e._v("'\n                        "),a("el-col",{attrs:{span:20}},[a("span",[e._v(e._s(e.detailsData.comment))])]),a("el-col",{staticClass:"upload-img-box",staticStyle:{"margin-left":"inherit"},attrs:{span:20}},e._l(e.workoImgFiles,function(e,t){return a("div",{key:t},[a("img",{attrs:{src:e.thumb_2,alt:"",width:"120",height:"90"}})])}),0)],1)],1),a("el-row",[a("el-col",{attrs:{span:4}},[e._v("状态：")]),a("el-col",{attrs:{span:20}},[a("span",[e._v(e._s(e.detailsData.workStateEnum.text))])])],1),a("el-row",[a("el-col",{attrs:{span:4}},[e._v("供应商：")]),a("el-col",{attrs:{span:20}},[a("span",[e._v(e._s(e.clickRowData.supplierName))])])],1),a("el-row",[a("el-col",{attrs:{span:4}},[e._v("联系人：")]),a("el-col",{attrs:{span:20}},[a("span",[e._v(e._s(e.clickRowData.contactName)+"  "+e._s(e.clickRowData.contactPhone))])])],1),a("el-row",[a("el-col",{attrs:{span:4}},[e._v("备注内容：")]),a("el-col",{attrs:{span:20}},[e._v("'\n                        "),a("el-col",{attrs:{span:20}},[a("span",[e._v(e._s(e.detailsData.remark))])]),a("el-col",{staticClass:"upload-img-box",staticStyle:{"margin-left":"inherit"},attrs:{span:20}},e._l(e.oImgFiles.imgArr,function(e,t){return a("div",{key:t},[a("img",{attrs:{src:e.thumb_2,alt:"",width:"120",height:"90"}})])}),0)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogReceiveDetail=!1}}},[e._v("确定")])],1)])],1):e._e(),e.dialogReceiveSubmit?a("div",{staticClass:"my-puple"},[a("el-dialog",{attrs:{title:"是否要提交金额",visible:e.dialogReceiveSubmit,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"660px","before-close":function(){return e.dialogReceiveSubmit=!1}},on:{"update:visible":function(t){e.dialogReceiveSubmit=t}}},[a("div",{staticClass:"my-puple-contract  mb-10"},[a("el-row",{staticClass:"mb-10",staticStyle:{"font-size":"14px"}},[a("el-col",{staticClass:"is-required-a",attrs:{span:4}},[e._v("请输入金额")]),a("el-col",{attrs:{span:15}},[a("el-input",{staticStyle:{width:"100%","text-align":"right"},attrs:{placeholder:"请和租客、供应商共同确认好金额,，避免纠纷",clearable:""},model:{value:e.SubmitMoney,callback:function(t){e.SubmitMoney=t},expression:"SubmitMoney"}})],1),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:1}},[e._v("元")])],1),a("el-row",{staticStyle:{"font-size":"14px"}},[a("el-col",{attrs:{span:4}},[e._v("备注")]),a("el-col",{attrs:{span:16}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入备注(选填、含50个字以内)"},model:{value:e.SubmitContent,callback:function(t){e.SubmitContent=t},expression:"SubmitContent"}})],1)],1),a("el-row",{staticClass:"mt-10",staticStyle:{"font-size":"14px"}},[a("el-col",{attrs:{span:4}},[e._v("上传图片")]),a("el-col",{staticClass:"sendPaymoney",attrs:{span:16}},[a("el-upload",{staticClass:"upload-demo",attrs:{"show-file-list":!1,"before-upload":e.beforeAvatarUpload,action:"",multiple:""}},[a("el-button",{staticStyle:{width:"100%"},attrs:{size:"small",type:"primary"}},[e._v("上传图片(只能上传3张，支持png.jpg)")])],1)],1)],1),a("el-col",{attrs:{span:24}},[a("el-col",{staticClass:"upload-img-box",attrs:{span:16}},e._l(e.oImgFiles.imgArr,function(t,l){return a("div",{key:l},[a("i",{staticClass:"el-icon-close",on:{click:function(t){return e.removeUploadImgOrigin("sendMoneyCloseImg",l)}}}),a("img",{attrs:{src:t.thumb_2,alt:"",width:"120",height:"90"}})])}),0)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.SubmitSendMoney}},[e._v("确定")]),a("el-button",{staticClass:"greenBtn",on:{click:function(t){e.dialogReceiveSubmit=!1}}},[e._v("取消")])],1)])],1):e._e(),e.dialogVisibleCheckedPay?a("div",{staticClass:"my-puple"},[a("el-dialog",{attrs:{title:e.SubmitNotarizePayModeTitle,visible:e.dialogVisibleCheckedPay,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"660px","before-close":function(){return e.dialogVisibleCheckedPay=!1}},on:{"update:visible":function(t){e.dialogVisibleCheckedPay=t}}},[a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.completed}},[e._v("确定")]),a("el-button",{staticClass:"greenBtn",on:{click:function(t){e.dialogVisibleCheckedPay=!1}}},[e._v("取消")])],1)])],1):e._e(),e.dialogFormVisible?a("div",{staticClass:"my-puple",staticStyle:{"margin-top":"15vh",width:"1000px"}},[a("el-dialog",{attrs:{title:"确认完成工单",visible:e.dialogVisiblePayComplete,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"660px","before-close":function(){return e.dialogVisiblePayComplete=!1}},on:{"update:visible":function(t){e.dialogVisiblePayComplete=t}}},[a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisiblePayComplete=!1}}},[e._v("确定")]),a("el-button",{staticClass:"greenBtn",on:{click:function(t){e.dialogVisiblePayComplete=!1}}},[e._v("取消")])],1)])],1):e._e(),a("el-dialog",{staticClass:"my-puple",attrs:{title:"确定要编辑服务介绍？",visible:e.dialogFormVisible,center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("div",[a("el-row",{staticClass:"each-item",staticStyle:{"margin-top":"40px"}},[a("el-col",{staticClass:"is-required-a",attrs:{span:5}},[e._v("服务类型")]),a("el-col",{attrs:{span:12}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择服务类型"},on:{change:e.serveTypeChange},model:{value:e.serverType,callback:function(t){e.serverType=t},expression:"serverType"}},e._l(e.agetSupplierTypes,function(e){return a("el-option",{key:e.val,attrs:{label:e.text,value:e.val}})}),1)],1)],1),a("el-row",{staticClass:"each-item",staticStyle:{"margin-top":"40px","margin-left":"20.83333%"}},[a("el-col",{attrs:{span:24}},[a("Edio",{ref:"editor",attrs:{getValue:e.serverContent}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.alterServer}},[e._v("确 定")])],1)]),e.dialogVisibleSupport?a("div",{staticClass:"my-puple"},[a("el-dialog",{attrs:{title:e.ModeTitle,visible:e.dialogVisibleSupport,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"660px","before-close":function(){return e.dialogVisibleSupport=!1}},on:{"update:visible":function(t){e.dialogVisibleSupport=t}}},[a("el-row",[a("el-row",{staticClass:"each-item"},[a("el-col",{staticClass:"is-required-a",attrs:{span:8}},[e._v("供应商名称")]),a("el-col",{attrs:{span:12}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入供应商名称",clearable:""},model:{value:e.dtcellclickRowData.name,callback:function(t){e.$set(e.dtcellclickRowData,"name",t)},expression:"dtcellclickRowData.name"}})],1)],1),a("el-row",{staticClass:"each-item"},[a("el-col",{staticClass:"is-required-a",attrs:{span:8}},[e._v("服务类型")]),a("el-col",{attrs:{span:12}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择服务类型"},model:{value:e.dtcellclickRowData.supplierTypeEnum.val,callback:function(t){e.$set(e.dtcellclickRowData.supplierTypeEnum,"val",t)},expression:"dtcellclickRowData.supplierTypeEnum.val"}},e._l(e.agetSupplierTypes,function(e){return a("el-option",{key:e.val,attrs:{label:e.text,value:e.val}})}),1)],1)],1),a("el-row",{staticClass:"each-item"},[a("el-col",{staticClass:"is-required-a",attrs:{span:8}},[e._v("供应商联系人")]),a("el-col",{attrs:{span:12}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入供应商联系人",clearable:""},model:{value:e.dtcellclickRowData.contactName,callback:function(t){e.$set(e.dtcellclickRowData,"contactName",t)},expression:"dtcellclickRowData.contactName"}})],1)],1),a("el-row",{staticClass:"each-item"},[a("el-col",{staticClass:"is-required-a",attrs:{span:8}},[e._v("供应商联系人手机号")]),a("el-col",{attrs:{span:12}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入供应商联系人手机号",clearable:""},model:{value:e.dtcellclickRowData.contactPhone,callback:function(t){e.$set(e.dtcellclickRowData,"contactPhone",t)},expression:"dtcellclickRowData.contactPhone"}})],1)],1),a("el-row",{staticClass:"each-item"},[a("el-col",{staticClass:"is-required-a",attrs:{span:8}},[e._v("供应商地址")]),a("el-col",{attrs:{span:12}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入供应商地址(30字以内)",clearable:""},model:{value:e.dtcellclickRowData.address,callback:function(t){e.$set(e.dtcellclickRowData,"address",t)},expression:"dtcellclickRowData.address"}})],1)],1),a("el-row",{staticClass:"each-item"},[a("el-col",{attrs:{span:8}},[e._v("供应商服务内容")]),a("el-col",{attrs:{span:12}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入供应商服务内容(50字以内)",clearable:""},model:{value:e.dtcellclickRowData.content,callback:function(t){e.$set(e.dtcellclickRowData,"content",t)},expression:"dtcellclickRowData.content"}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.AddSupplier("send")}}},[e._v("确 定")]),a("el-button",{staticClass:"greenBtn",on:{click:function(t){e.dialogVisibleSupport=!1}}},[e._v("取 消")])],1)],1)],1):e._e(),e.dialogVisibleSupports?a("div",{staticClass:"my-puple"},[a("el-dialog",{attrs:{title:"供应商列表",visible:e.dialogVisibleSupports,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"1200px","before-close":function(){return e.dialogVisibleSupports=!1}},on:{"update:visible":function(t){e.dialogVisibleSupports=t}}},[a("div",{staticClass:"padding: 20px 30px;"},[a("el-table",{key:"look-puple",staticStyle:{width:"100%"},attrs:{data:e.aGetSupplierList,border:""}},[a("el-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"80"}}),a("el-table-column",{attrs:{prop:"name",align:"center",label:"供应商名称"}}),a("el-table-column",{attrs:{prop:"serviceNum",align:"center",label:"维修次数(含进行中)"}}),a("el-table-column",{attrs:{prop:"supplierTypeEnum.text",align:"center",label:"服务类型"}}),a("el-table-column",{attrs:{prop:"content",align:"center",label:"服务内容"}}),a("el-table-column",{attrs:{prop:"address",align:"center",label:"供应商地址"}}),a("el-table-column",{attrs:{prop:"contactName",align:"center",label:"联系人"}}),a("el-table-column",{attrs:{prop:"contactPhone",align:"center",label:"联系人人手机号"}}),a("el-table-column",{attrs:{prop:"updateTime",align:"center",label:"更新时间"}}),a("el-table-column",{attrs:{prop:"address",align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return["-1"!=e.$authority.indexOf("editSupplier")?a("span",{staticClass:"greenFont",on:{click:function(a){return e.AddSupplier("RedactShow",t.row)}}},[e._v("编辑")]):e._e()]}}],null,!1,2517937226)})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"greenBtn",on:{click:function(t){e.dialogVisibleSupports=!1}}},[e._v("取 消")])],1)])],1):e._e()],1)},s=[],i=a("37b8"),o=a("3f88"),r=a("729c"),c=a("90b9"),n=(a("591a"),{name:"service",components:{Edio:i["a"],myEditor:o["a"],"v-editor":i["a"]},data(){return{content:"",result:"",path:"/api/file/uploadthumbCompress",value:"",value1:[],tableData:[],dialogVisible:!1,dialogReceiveDistribute:!1,dialogReceiveSubmit:!1,dialogReceiveDetail:!1,dialogReceiveComfirm:!1,dialogVisibleSupport:!1,dialogVisibleSupports:!1,dialogVisibleClose:!1,dialogVisibleCheckedPay:!1,dialogVisiblePayComplete:!1,msg:"请输入，1(含)~10000个字以内(含)，不限图片张数",myConfig:{autoHeightEnabled:!1,initialFrameHeight:500,initialFrameWidth:"100%",serverUrl:"http://35.201.165.105:8000/controller.php",UEDITOR_HOME_URL:"UEditor/"},currentPage:1,iDefalutNumber:10,aStartToEnd:"",sRowState:"",total:0,States:[],projectvalue:"",clickRowData:{},detailsData:{workStateEnum:{text:""}},agetSupplierTypes:[],SupplierListByType:[],SupplierTypeValue:"",sSnedordUser:{contactName:"",contactPhone:""},SupplierListByValue:"",sAddSupplierName:"",sAddSupplierType:"",sAddSupplierContacts:"",sAddSupplierContactsPhone:"",sAddSupplierAddress:"",sAddSupplierConttent:"",sSecrhStateValue:"",aGetSupplierList:[],cellclickRowData:[],dtcellclickRowData:{supplierTypeEnum:{val:0}},dialogFormVisible:!1,form:{name:"",resource:""},serverType:0,serverContent:"",serverId:"",imageUrl:"",ModeTitle:"",SubmitMoney:"",SubmitContent:"",SubmitNotarizePayModeTitle:"",workoImgFiles:[],oImgFiles:{imgArr:[],thumb_2:""},uploadImgUrl:"",project:[]}},created(){this.init()},computed:{},mounted(){},methods:{submit(){console.log(this.result)},serveTypeChange(){this.Editingservice(this.serverType)},alterServer(){try{let t=this;this.$http("/api/work/editorWorkIntroduction",{method:"post",data:{type:t.serverType,content:t.$refs.editor.editorVal||""}}).then(e=>{0==e.data.errorCode?(t.$message({message:e.data.message,type:"success"}),t.dialogFormVisible=!1):this.$message.error(e.data.message)})}catch(e){console.log(e)}},Editingservice(e=2){let t=this,a={type:e};t.agetSupplierTypes.length<=0&&Object(r["vb"])().then(e=>{t.agetSupplierTypes=e.data.data}),t.$http("/api/work/getWorkIntroductionView",{method:"get",params:a}).then(e=>{0==e.data.errorCode?(t.serverContent=e.data.data.content,t.serverId=e.data.data.id,t.serverType=e.data.data.type,t.dialogFormVisible=!0):t.$message.error(e.data.message)}).then(()=>{t.$refs.editor.editorinit(t.$refs.editor.$refs.editor)}).catch(e=>{0===t.serverType&&(t.serverContent="",t.serverId="",t.dialogFormVisible=!0)})},removeUploadImgOrigin(e,t){"sendMoneyCloseImg"===e&&this.oImgFiles.imgArr.splice(t,1)},isSendMoney(){this.dialogReceiveSubmit=!0,this.SubmitMoney="",this.oImgFiles.imgArr=[]},beforeAvatarUpload(e){if(this.oImgFiles.imgArr.length>2)return void this.$message.error("超过最大上传张数,无法继续上传!");const t="image/jpeg"===e.type||"image/png"===e.type,a=e.size/1024/1024<3;if(!t)return void this.$message.error("上传图片只能是 JPG/png 格式!");if(!a)return void this.$message.error("上传图片大小不能超过 3MB!");let l=new FormData;l.append("file",e),this.$http({method:"post",url:"./api/file/uploadthumbCompress",data:l}).then(e=>{this.oImgFiles.imgArr.push(e.data.data)})},completed(){try{let t=this,a={id:t.clickRowData.id};Object(r["p"])(a).then(e=>{e.data.result&&(t.getWorkPage(),t.dialogVisibleCheckedPay=!1,t.$message({type:"success",message:e.data.message}))}).catch(()=>{})}catch(e){console.log(e)}},submitCompleted(){try{let t=this,a={id:t.clickRowData.id};t.$confirm("确认提交完成 ？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(r["Kb"])(a).then(e=>{e.data.result&&(t.getWorkPage(),t.$message({type:"success",message:e.data.message}))})}).catch(()=>{})}catch(e){console.log(e)}},changetypes(){this.SupplierListByType.map((e,t,a)=>{e.id===this.SupplierListByValue&&(this.sSnedordUser.contactName=e.contactName,this.sSnedordUser.contactPhone=e.contactPhone)})},SubmitSendMoney(){try{let t=this,a=JSON.parse(JSON.stringify(t.oImgFiles.imgArr));if(a=a.map((e,t,a)=>{return e.id}),a=a.join(","),t.SubmitMoney=parseFloat(t.SubmitMoney),!t.SubmitMoney)return void this.$message({message:"金额不能为空",type:"warning"});let l={id:t.clickRowData.id,cost:parseFloat(t.SubmitMoney).toFixed(2),fileIds:a,remark:t.SubmitContent};Object(r["Jb"])(l).then(e=>{e.data.result&&(t.getWorkPage(),t.$message({type:"success",message:e.data.message}),t.dialogReceiveSubmit=!1)})}catch(e){console.log(e)}},Close(){try{let t=this,a={id:t.clickRowData.id};t.$confirm("此操作将永久删除工单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(r["n"])(a).then(e=>{e.data.result&&(t.$message({type:"success",message:e.data.message}),t.getWorkPage())})}).catch(()=>{})}catch(e){console.log(e)}},async RedactSupplier(e){try{let a=this;a.ModeTitle="编辑";let l=await Object(r["wb"])({id:e.id});a.dtcellclickRowData=l.data.data,a.$nextTick(()=>{a.dialogVisibleSupport=!0})}catch(t){console.log(t)}},Judge(){let e=this;return""===e.dtcellclickRowData.name?(e.$message.error("供应商名称不能为空"),!1):""===e.dtcellclickRowData.supplierTypeEnum.val?(e.$message.error("服务类型不能为空"),fasle):""===e.dtcellclickRowData.contactName?(e.$message.error("供应商联系人不能为空"),fasle):""===e.dtcellclickRowData.contactPhone||!1===Object(c["c"])(e.dtcellclickRowData.contactPhone)?(e.$message.error("供应商联系人手机号为空或格式不正确"),fasle):e.dtcellclickRowData.address.length<=0||e.dtcellclickRowData.address.length>30?(e.$message.error("供应商地址为空或大于30字"),fasle):!(e.dtcellclickRowData.content.length<=0||e.dtcellclickRowData.content.length>50)||(e.$message.error("供应商内容为空或大于50字"),fasle)},async getSupplierList(){let e=this,t=await Object(r["tb"])();e.aGetSupplierList=t.data.data,e.dialogVisibleSupports=!0},async AddSupplier(e,t={}){try{let l=this;if(l.agetSupplierTypes.length<=0){let e=await Object(r["vb"])();l.agetSupplierTypes=e.data.data}let s={name:l.dtcellclickRowData.name,type:l.dtcellclickRowData.supplierTypeEnum.val,contactName:l.dtcellclickRowData.contactName,contactPhone:l.dtcellclickRowData.contactPhone,address:l.dtcellclickRowData.address,content:l.dtcellclickRowData.content};if("addShow"===e)l.dtcellclickRowData.name="",l.dtcellclickRowData.supplierTypeEnum.val="",l.dtcellclickRowData.contactName="",l.dtcellclickRowData.contactPhone="",l.dtcellclickRowData.address="",l.dtcellclickRowData.content="",l.ModeTitle="添加",s.id=l.dtcellclickRowData.id,l.dialogVisibleSupport=!0;else if("RedactShow"===e)l.RedactSupplier(t);else if("send"===e){if(!l.Judge())return;s.id=l.dtcellclickRowData.id,Object(r["A"])(s).then(e=>{e.data.result?(l.$message({message:e.data.message,type:"success"}),l.dialogVisibleSupport=!1,l.getSupplierList()):l.$message.error(e.data.message)})}}catch(a){}},AlterSendOrders(){try{let t=this;if(""===t.SupplierTypeValue)return void this.$message({message:"服务类型不能为空",type:"warning"});if(""===t.SupplierListByValue)return void this.$message({message:"服务供应商不能为空",type:"warning"});let a={workId:t.clickRowData.id,supplierId:t.SupplierListByValue};Object(r["v"])(a).then(e=>{e.data.result?(t.$message({message:e.data.message,type:"success"}),t.dialogReceiveDistribute=!1,t.getWorkPage()):t.$message.error(e.data.message)})}catch(e){console.log(e)}},getWorkStates(){try{Object(r["Ab"])().then(e=>{this.States=e.data.data})}catch(e){console.log(e)}},details(){try{let t=this;t.detailsData={workStateEnum:{text:""}};let a={id:t.clickRowData.id};Object(r["Bb"])(a).then(e=>{t.detailsData=e.data.data,t.serverContent=t.detailsData.comment,t.oImgFiles.imgArr=e.data.data.workMoneyImgList?e.data.data.workMoneyImgList:[],t.workoImgFiles=e.data.data.workImgList?e.data.data.workImgList:[],t.dialogReceiveDetail=!0})}catch(e){console.log(e)}},getSupplierListByType(){try{let t={type:this.SupplierTypeValue};this.SupplierListByType=[],this.SupplierListByValue="",Object(r["ub"])(t).then(e=>{e.data.result&&(e.data.data.length>=1?(this.SupplierListByType=e.data.data,this.sSnedordUser.contactName=this.SupplierListByType[0].contactName,this.sSnedordUser.contactPhone=this.SupplierListByType[0].contactPhone):(this.sSnedordUser.contactName="",this.sSnedordUser.contactPhone=""))})}catch(e){console.log(e)}},dispatchBtn(){this.SupplierListByType=[],this.SupplierListByValue="",this.SupplierTypeValue="",this.sSnedordUser={},Object(r["vb"])().then(e=>{this.agetSupplierTypes=e.data.data,this.dialogReceiveDistribute=!0})},cellclick(e,t,a,l){this.clickRowData=e,"详情"===l.target.innerText?(this.serverType=this.clickRowData.type,this.details()):"派单"===l.target.innerText?this.dispatchBtn():"关闭"===l.target.innerText?this.Close():"提交完成"===l.target.innerText?this.submitCompleted():"确认付款"===l.target.innerText&&(this.SubmitNotarizePayModeTitle=`确认已给${this.clickRowData.supplierName} ${parseFloat(this.clickRowData.cost).toFixed(2)}元`,this.dialogVisibleCheckedPay=!0)},getWorkPage(){if(this.project.length<=0)return;let e={currentPage:this.currentPage,pageSize:this.iDefalutNumber,orgId:this.projectvalue,startCreateTime:"",endCreateTime:"",state:this.sSecrhStateValue};this.aStartToEnd&&(e.startCreateTime=this.aStartToEnd[0],e.endCreateTime=this.aStartToEnd[1]),Object(r["zb"])(e).then(e=>{this.total=e.data.data.total,this.tableData=e.data.data.content}).catch(e=>{})},getProjects(){this.$store.state.projectList.length<=0&&Object(r["mb"])().then(e=>{e.data.result&&this.$store.commit("setProject",e.data.data)})},getproj(){this.$http.get("/api/bill/getOrgList").then(e=>{console.log(e.data.data),0==e.data.errorCode&&e.data.data.length>0&&(this.project=e.data.data,this.project.unshift({orgName:"全部",orgId:""}))}).then(()=>{this.project.length>0&&(this.getWorkPage(),this.getWorkStates())}).catch(e=>{console.log(e)})},init(){this.getproj()},handleSizeChange(e){this.currentPage=1,this.iDefalutNumber=e,this.getWorkPage(),console.log(`每页 ${e} 条`)},handleCurrentChange(e){this.currentPage=e,this.getWorkPage(),console.log(`当前页: ${e}`)}}}),p=n,d=(a("6573"),a("6691")),u=Object(d["a"])(p,l,s,!1,null,null,null);t["default"]=u.exports}}]);