(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8dd56872"],{"425e":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"selectDept"},[a("el-input",{attrs:{placeholder:e.placeholder?e.placeholder:"",readonly:""},nativeOn:{click:function(t){return e.changeShowMode(t)}},model:{value:e.inputVal,callback:function(t){e.inputVal=t},expression:"inputVal"}}),""!=e.inputVal?a("i",{staticClass:"el-icon-close",on:{click:e.clearInputValFunc}}):e._e(),a("transition",{attrs:{name:"el-zoom-in-top"}},[e.isShow?a("div",{staticClass:"show-tree"},[a("a-tree",{staticStyle:{width:"100%"},attrs:{showLine:"",autoExpandParent:!0,selectedKeys:e.selectedKeys,defaultExpandedKeys:e.defaultExpandKeys,treeData:e.deptOrgTree},on:{expand:e.onExpand,select:e.onSelect},model:{value:e.checkedKeys,callback:function(t){e.checkedKeys=t},expression:"checkedKeys"}})],1):e._e()])],1)},i=[],n={name:"selectDept",data(){return{deptOrgTree:[],checkedKeys:[],expandedKeys:[],selectedKeys:[],defaultExpandKeys:[],selectInfo:{},inputVal:"",isShow:!1,getDefaultKey:!1}},props:["choiceVal","placeholder"],created(){this.getDeptTree()},watch:{choiceVal(){if(this.choiceVal&&""!=this.choiceVal){var e=[];e.push(this.choiceVal),this.onSelect(e,"")}}},methods:{onExpand(e){this.expandedKeys=e,this.autoExpandParent=!1},onSelect(e,t){this.selectedKeys=e,this.getSelectInfo(this.deptOrgTree),this.inputVal=this.selectInfo.title,this.getDefaultKey=!1,this.$emit("changeTreeVal",this.selectInfo),this.isShow=!1},getSelectInfo(e){if(this.selectedKeys&&1==this.selectedKeys.length&&e&&e.length>0)for(var t=0;t<e.length;t++)this.selectedKeys[0]==e[t].key&&(this.selectInfo=e[t]),e[t].children&&e[t].children.length>0&&this.getSelectInfo(e[t].children)},getDefaultExpand(e){if(e&&e.length>0)for(var t=0;t<e.length;t++){if(this.selectedKeys[0]==e[t].key)return void(this.getDefaultKey=!0);this.defaultExpandKeys.push(e[t].key),e[t].children&&e[t].children.length>0&&!this.getDefaultKey&&this.getDefaultExpand(e[t].children)}},changeShowMode(){this.isShow=!this.isShow,this.defaultExpandKeys=[],this.isShow||(this.getDefaultKey=!1),this.isShow&&""!==this.inputVal&&this.getDefaultExpand(this.deptOrgTree)},clearInputValFunc(){this.inputVal="",this.selectInfo={},this.selectedKeys=[],this.$emit("changeTreeVal","clear")},leaveDeptArea(){this.isShow=!1},getDeptTree(){this.$http.get("/api/department/getAllTreeDepartment").then(e=>{var t=e.data;if(0==t.errorCode&&(this.deptOrgTree=t.data||[],this.renderTree(this.deptOrgTree),this.choiceVal&&""!=this.choiceVal)){var a=[];a.push(this.choiceVal),this.onSelect(a,"")}}).catch(function(e){console.log(e)})},renderTree(e){for(var t=0;t<e.length;t++)e[t].title=e[t].name,e[t].key=e[t].departmentId,e[t].children=e[t].childList||[],delete e[t].name,delete e[t].departmentId,delete e[t].childList,delete e[t].type,delete e[t].level,delete e[t].sort,delete e[t].id,e[t]&&e[t].children.length>0&&this.renderTree(e[t].children)}}},l=n,o=(a("cabb"),a("6691")),r=Object(o["a"])(l,s,i,!1,null,null,null);t["a"]=r.exports},"4f65":function(e,t,a){},5097:function(e,t,a){"use strict";var s=a("c2aa"),i=a.n(s);i.a},8083:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"deptManage"},["-1"!=e.$authority.indexOf("departmentSearch")?a("div",{staticClass:"search-list"},[a("el-row",[a("el-col",{attrs:{span:22}},[a("el-col",{staticStyle:{height:"60px",overflow:"hidden"},attrs:{span:1}},[e._v("部门名称")]),a("el-col",{attrs:{span:23}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入部门名称",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchDeptTable(t)}},model:{value:e.searchInfo.deptName,callback:function(t){e.$set(e.searchInfo,"deptName",t)},expression:"searchInfo.deptName"}})],1)],1),a("el-col",{staticClass:"disp-right pr-10",attrs:{span:2}},[a("el-button",{staticClass:"el-button el-button--primary",on:{click:e.searchDeptTable}},[e._v("查询")])],1)],1)],1):e._e(),a("div",{staticClass:"dept-main-box"},[a("el-row",[a("el-col",{staticClass:"dept-left-tree",attrs:{span:4}},[a("div",{staticClass:"tree-box"},[e.deptOrgTree.length?a("a-tree",{staticStyle:{width:"100%"},attrs:{showLine:"",autoExpandParent:!0,selectedKeys:e.selectedKeys,defaultExpandedKeys:e.defaultExpandKeys,treeData:e.deptOrgTree},on:{expand:e.onExpand,select:e.onSelect},model:{value:e.checkedKeys,callback:function(t){e.checkedKeys=t},expression:"checkedKeys"}}):e._e()],1)]),a("el-col",{attrs:{span:19}},[a("div",{staticClass:"content-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.deptTableData,stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"name",align:"center",label:"名称"}}),a("el-table-column",{attrs:{prop:"pname",align:"center",label:"所属部门"}}),a("el-table-column",{attrs:{prop:"typeName",align:"center",label:"类型"}}),a("el-table-column",{attrs:{prop:"sort",align:"center",label:"顺序"}}),a("el-table-column",{attrs:{prop:"operate",align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return["-1"!=e.$authority.indexOf("departmentEdit")?a("span",{staticClass:"greenFont tabOperteBtn",on:{click:function(a){return e.enterDeptEdit(t.row)}}},[e._v("编辑")]):e._e(),"-1"!=e.$authority.indexOf("departmentDelete")?a("span",{staticClass:"greenFont tabOperteBtn",on:{click:function(a){return e.enterDeptDelete(t.row)}}},[e._v("删除")]):e._e()]}}])})],1)],1)])],1)],1),a("transition",{attrs:{name:"el-fade-in-linear"}},[e.dialogVisibleDept?a("div",{staticClass:"my-puple"},[a("el-dialog",{attrs:{title:("insert"==e.deptInfo.mode?"添加":"编辑")+"部门",visible:e.dialogVisibleDept,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"720px","before-close":function(){e.dialogVisibleDept=!1}},on:{"update:visible":function(t){e.dialogVisibleDept=t}}},[a("el-row",{staticClass:"basicInfo"},[a("div",[e._v("基本信息")])]),a("el-row",{staticStyle:{"padding-left":"10px"}},[a("el-row",{staticClass:"each-item"},[a("el-col",{attrs:{span:12}},[a("el-col",{staticClass:"is-required-b",attrs:{span:6}},[e._v("部门名称")]),a("el-col",{attrs:{span:16}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"",clearable:""},model:{value:e.deptInfo.deptName,callback:function(t){e.$set(e.deptInfo,"deptName",t)},expression:"deptInfo.deptName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-col",{staticClass:"is-required-b",attrs:{span:6}},[e._v("所属部门")]),a("el-col",{attrs:{span:16}},[a("select-dept",{ref:"selectDept",attrs:{choiceVal:e.deptInfo.pid},on:{changeTreeVal:e.deptChangeTree}})],1)],1)],1),a("el-row",[a("el-col",{staticClass:"is-required-b",attrs:{span:3}},[e._v("显示顺序")]),a("el-col",{attrs:{span:20}},[a("el-input-number",{staticStyle:{width:"100%","text-align":"left"},attrs:{min:0,label:"",controls:!1},model:{value:e.deptInfo.sort,callback:function(t){e.$set(e.deptInfo,"sort",t)},expression:"deptInfo.sort"}})],1)],1),a("el-row",{staticClass:"mt-10"},[a("el-col",{attrs:{span:12}},[a("el-col",{attrs:{span:6}},[e._v("总部")]),a("el-col",{attrs:{span:16}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.deptInfo.deptGender,callback:function(t){e.$set(e.deptInfo,"deptGender",t)},expression:"deptInfo.deptGender"}},e._l(e.deptList,function(e){return a("el-option",{key:e.val,attrs:{label:e.text,value:e.val}})}),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-col",{attrs:{span:6}},[e._v("部门电话")]),a("el-col",{attrs:{span:16}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入姓名",clearable:""},model:{value:e.deptInfo.deptPhone,callback:function(t){e.$set(e.deptInfo,"deptPhone",t)},expression:"deptInfo.deptPhone"}})],1)],1)],1),a("el-row",{staticClass:"mt-10"},[a("el-col",{staticClass:"is-required-b",attrs:{span:3}},[e._v("城市")]),a("el-col",{staticStyle:{"padding-right":"29px"},attrs:{span:7}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择省份"},on:{change:e.changeProvinceVal},model:{value:e.deptInfo.province,callback:function(t){e.$set(e.deptInfo,"province",t)},expression:"deptInfo.province"}},e._l(e.provinceList,function(e){return a("el-option",{key:e.id,attrs:{label:e.cityName,value:e.id}})}),1)],1),a("el-col",{staticStyle:{"padding-right":"29px"},attrs:{span:7}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择市"},on:{change:e.changeCityVal},model:{value:e.deptInfo.city,callback:function(t){e.$set(e.deptInfo,"city",t)},expression:"deptInfo.city"}},e._l(e.cityList,function(e){return a("el-option",{key:e.id,attrs:{label:e.cityName,value:e.id}})}),1)],1),a("el-col",{staticStyle:{"padding-right":"29px"},attrs:{span:7}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择区/县"},model:{value:e.deptInfo.county,callback:function(t){e.$set(e.deptInfo,"county",t)},expression:"deptInfo.county"}},e._l(e.countyList,function(e){return a("el-option",{key:e.id,attrs:{label:e.cityName,value:e.id}})}),1)],1)],1),a("el-row",{staticClass:"mt-10"},[a("el-col",{attrs:{span:3}},[e._v("部门地址")]),a("el-col",{attrs:{span:20}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"",clearable:""},model:{value:e.deptInfo.address,callback:function(t){e.$set(e.deptInfo,"address",t)},expression:"deptInfo.address"}})],1)],1),a("el-row",{staticClass:"mt-10"},[a("el-col",{attrs:{span:3}},[e._v("部门描述")]),a("el-col",{attrs:{span:20}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"",clearable:""},model:{value:e.deptInfo.describe,callback:function(t){e.$set(e.deptInfo,"describe",t)},expression:"deptInfo.describe"}})],1)],1)],1),"-1"!=e.$authority.indexOf("showEditBrand")?a("el-row",{staticClass:"pr-10",staticStyle:{"text-align":"right"}},[a("span",{staticClass:"greenFont tabOperteBtn",on:{click:function(t){e.editBrandInfoBoolean=!e.editBrandInfoBoolean}}},[e._v("编辑品牌信息")])]):e._e(),e.editBrandInfoBoolean?a("el-row",[a("el-row",[1===e.deptInfo.pid?a("el-row",[a("el-row",{staticClass:"basicInfo",staticStyle:{"margin-top":"auto"}},[a("div",[e._v("品牌设置")])]),1===e.deptInfo.pid?a("el-row",{staticStyle:{"padding-left":"10px"}},[a("el-row",{staticClass:"each-item"},[a("el-col",{attrs:{span:12}},[a("el-col",{attrs:{span:6}},[e._v("品牌名称")]),a("el-col",{attrs:{span:16}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"",clearable:""},model:{value:e.deptInfo.brandname,callback:function(t){e.$set(e.deptInfo,"brandname",t)},expression:"deptInfo.brandname"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-col",{attrs:{span:6}},[e._v("拼音简写")]),a("el-col",{attrs:{span:16}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"",clearable:""},model:{value:e.deptInfo.brandspelllogoram,callback:function(t){e.$set(e.deptInfo,"brandspelllogoram",t)},expression:"deptInfo.brandspelllogoram"}})],1)],1)],1),a("el-row",{staticClass:"each-item"},[a("el-col",{attrs:{span:12}},[a("el-col",{attrs:{span:6}},[e._v("品牌介绍")]),a("el-col",{attrs:{span:16}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"",clearable:""},model:{value:e.deptInfo.brandintroduce,callback:function(t){e.$set(e.deptInfo,"brandintroduce",t)},expression:"deptInfo.brandintroduce"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-col",{attrs:{span:6}},[e._v("官网地址")]),a("el-col",{attrs:{span:16}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"",clearable:""},model:{value:e.deptInfo.officialwebsite,callback:function(t){e.$set(e.deptInfo,"officialwebsite",t)},expression:"deptInfo.officialwebsite"}})],1)],1)],1),a("el-row",{staticClass:"each-item"},[a("el-col",{attrs:{span:12}},[a("el-col",{attrs:{span:6}},[e._v("品牌Logo")]),a("el-col",{attrs:{span:16}},[a("el-row",{staticStyle:{overflow:"hidden"}},[a("el-upload",{attrs:{action:"","before-upload":e.success,accept:"image",multiple:!1,"show-file-list":!1}},[a("div",{staticClass:"input-pic-box",staticStyle:{padding:"0"}},[a("el-button",{staticClass:"upload-bg"},[e._v("上传图片")])],1),a("p",{staticClass:"hint",attrs:{title:"能上传1张，支持png.jpg，尺寸690*345"}},[e._v("只能上传1张，支持png.jpg，尺寸690*345")])])],1),e.deptInfo.brandlogolist.thumb_1?a("el-row",{staticClass:"logos"},[a("i",{staticClass:"el-icon-close",on:{click:e.removeBrandLogo}}),a("img",{staticStyle:{width:"100px",height:"55px"},attrs:{src:e.deptInfo.brandlogolist.thumb_1}})]):e._e()],1)],1),a("el-col",{attrs:{span:12}},[a("el-row",[a("el-col",{staticClass:"pl-10",attrs:{span:6}},[e._v("登录链接")]),a("el-col",{attrs:{span:8}},[a("el-button",{staticClass:"craeloginbtn",on:{click:e.craetedLoginUrl}},[e._v("生成登录链接")])],1)],1),e.deptInfo.loginUrl?a("el-row",[a("el-col",{staticClass:"pl-10",attrs:{span:6}},[e._v("登录地址")]),a("el-col",{attrs:{span:18}},[e._v("\n                                        "+e._s(e.deptInfo.loginUrl)+"\n                                    ")])],1):e._e()],1)],1)],1):e._e()],1):e._e()],1)],1):e._e(),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.comfirmSubmitDept}},[e._v("保 存")])],1)],1)],1):e._e()]),e.dialogVisibleDelete?a("div",{staticClass:"my-puple"},[a("el-dialog",{attrs:{title:"删除",visible:e.dialogVisibleDelete,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"660px","before-close":function(){e.dialogVisibleDelete=!1}},on:{"update:visible":function(t){e.dialogVisibleDelete=t}}},[a("el-row",[a("el-row",{staticClass:"each-item"},[a("el-col",{attrs:{span:20,offset:1}},[e._v("您确定删除该条记录吗？")]),a("el-col",{attrs:{span:20,offset:1}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入删除原因",type:"textarea",autosize:{minRows:3,maxRows:4},clearable:""},model:{value:e.deleteInfo.reason,callback:function(t){e.$set(e.deleteInfo,"reason",t)},expression:"deleteInfo.reason"}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.comfirmDeleteDept}},[e._v("确 定")])],1)],1)],1):e._e(),a("div",{staticClass:"el-page"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[10,20,30,40,50],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},i=[],n=a("425e"),l={name:"deptManage",components:{selectDept:n["a"]},data(){return{editBrandInfoBoolean:!1,value:"",searchInfo:{deptName:""},deptTableData:[],deptOrgTree:[],checkedKeys:[],expandedKeys:[],defaultExpandKeys:[],selectedKeys:[],dialogVisibleDept:!1,dialogVisibleDelete:!1,fromWhere:"search",currentPage:1,pageSize:10,total:10,deptList:[],provinceList:[],cityList:[],countyList:[],deptInfo:{mode:"insert",deptName:"",deptId:"",pid:"",sort:"",deptGender:"",deptPhone:"",province:"",city:"",county:"",address:"",describe:"",brandname:"",brandspelllogoram:"",brandintroduce:"",officialwebsite:"",loginUrl:"",brandlogolist:{id:"",thumb_1:"",thumb_2:"",url:""},pid:""},deleteInfo:{deptId:"",reason:""}}},created(){this.getDeptTree()},mounted(){},watch:{"$store.getters.getDeptInfo.count"(){this.$store.getters.getDeptInfo.isShow&&this.enterDeptInsert()}},methods:{handleSizeChange(e){this.currentPage=1,this.pageSize=e,this.getDeptTableList()},handleCurrentChange(e){this.currentPage=e,this.getDeptTableList()},onExpand(e){this.expandedKeys=e,this.autoExpandParent=!0},onSelect(e,t){this.selectedKeys=e,this.currentPage=1,this.fromWhere="deptId",this.getDeptTableList()},enterDeptEdit(e){this.deptInfo.mode="edit",this.deptInfo.deptName=e.name,this.deptInfo.deptId=e.departmentId||"",this.deptInfo.pid=e.pid,this.deptInfo.deptGender=e.type,this.getDeptDetail(),this.getProvinceList(),this.dialogVisibleDept=!0},deptChangeTree(e){"clear"==e?(this.deptList=[],this.deptInfo.deptGender="",this.deptInfo.pid=""):(this.deptInfo.pid=e.key,this.getDeptList(e.key||""))},getDeptDetail(){this.$http.get("/api/department/getDepartmentView",{params:{departmentId:this.deptInfo.deptId}}).then(e=>{var t=e.data;0==t.errorCode&&(this.deptInfo.sort=t.data.sort,this.deptInfo.deptGender=t.data.type,this.deptInfo.deptPhone=t.data.phone,this.deptInfo.province=t.data.provinceId,this.deptInfo.city=t.data.cityId,this.deptInfo.county=t.data.districtId,this.deptInfo.address=t.data.address,this.deptInfo.describe=t.data.description,this.deptInfo.pid=t.data.pid,1===t.data.pid&&(this.deptInfo.brandname=t.data.brandName,this.deptInfo.brandspelllogoram=t.data.brandLogogram,this.deptInfo.brandintroduce=t.data.brandIntroduce,this.deptInfo.officialwebsite=t.data.brandUrl,this.deptInfo.brandlogolist.thumb_1=t.data.brandLogoUrl))}).catch(function(e){console.log(e)})},enterDeptInsert(){this.deptInfo.mode="insert",this.deptInfo.deptName="",this.deptInfo.deptId="",this.deptInfo.sort="",this.deptInfo.deptGender="",this.deptInfo.deptPhone="",this.deptInfo.province="",this.deptInfo.city="",this.deptInfo.county="",this.deptInfo.address="",this.deptInfo.describe="",this.deptInfo.brandname="",this.deptInfo.brandspelllogoram="",this.deptInfo.brandintroduce="",this.deptInfo.officialwebsite="",this.deptInfo.brandlogolist={id:"",thumb_1:"",thumb_2:"",url:""},this.deptInfo.loginUrl="",this.cityList=[],this.countyList=[],this.getProvinceList(),this.dialogVisibleDept=!0},enterDeptDelete(e){this.deleteInfo.deptId=e.departmentId||"",this.deleteInfo.reason="",this.dialogVisibleDelete=!0},getDeptTree(){this.$http.get("/api/department/getAllTreeDepartment").then(e=>{var t=e.data;0==t.errorCode&&(this.deptOrgTree=t.data||[],this.renderTree(this.deptOrgTree),this.fromWhere="deptId",this.deptOrgTree&&this.deptOrgTree[0].children&&this.deptOrgTree[0].children.length>0&&this.selectedKeys.push(this.deptOrgTree[0].children[0].key),this.deptOrgTree&&this.deptOrgTree.length>0&&(this.defaultExpandKeys.push(Number(this.deptOrgTree[0].key)),this.defaultExpandKeys.push(Number(this.deptOrgTree[0].children[0].key))),this.getDeptTableList())}).catch(function(e){console.log(e)})},renderTree(e){for(var t=0;t<e.length;t++)e[t].title=e[t].name,e[t].key=e[t].departmentId,e[t].children=e[t].childList||[],delete e[t].name,delete e[t].departmentId,delete e[t].childList,delete e[t].pid,delete e[t].type,delete e[t].level,delete e[t].sort,delete e[t].id,e[t]&&e[t].children.length>0&&this.renderTree(e[t].children)},searchDeptTable(){this.fromWhere="search",this.currentPage=1,this.selectedKeys=[],this.getDeptTableList()},getDeptTableList(){var e={currentPage:this.currentPage,pageSize:this.pageSize},t="";if("search"==this.fromWhere)e.name=this.searchInfo.deptName,t="/api/department/getDepartmentNamePage";else{if(e.departmentId=this.selectedKeys.length>0?this.selectedKeys[0]:"",""==e.departmentId)return;t="/api/department/getDepartmentPidPage"}this.$http.get(t,{params:e}).then(e=>{var t=e.data;if(0==t.errorCode){this.deptTableData=t.data.content||[];for(var a=0;a<this.deptTableData.length;a++)switch(this.deptTableData[a].type){case 1:this.deptTableData[a].typeName="总部";break;case 2:this.deptTableData[a].typeName="本区";break;case 3:this.deptTableData[a].typeName="本店";break;case 4:this.deptTableData[a].typeName="本部";break;case 5:this.deptTableData[a].typeName="本组";break;default:this.deptTableData[a].typeName="-";break}this.total=t.data.total}}).catch(function(e){console.log(e)})},getDeptList(e){this.$http.get("/api/department/getDepartmentTypesByDepartmentId",{params:{departmentId:e}}).then(e=>{var t=e.data;if(0==t.errorCode)if(this.deptList=t.data||[],this.deptList.length>0)if(this.deptInfo.deptGender&&""!=this.deptInfo.deptGender){for(var a={flag:!1,count:0},s=0;s<this.deptList.length;s++)this.deptList[s].val==this.deptInfo.deptGender&&(a.flag=!0,a.count=s);a.flag?this.deptInfo.deptGender=this.deptList[a.count].val:this.deptInfo.deptGender=this.deptList[0].val}else this.deptInfo.deptGender=this.deptList[0].val;else this.deptInfo.deptGender=""}).catch(function(e){console.log(e)})},getProvinceList(){this.$http.get("/api/org/getCity",{params:{pid:"1",type:"1"}}).then(e=>{var t=e.data;0==t.errorCode&&(this.provinceList=t.data||[],this.gitCityList())}).catch(function(e){console.log(e)})},changeProvinceVal(){""!==this.deptInfo.province?(this.deptInfo.city="",this.deptInfo.county="",this.countyList=[],this.gitCityList()):(this.cityList=[],this.countyList=[],this.deptInfo.city="",this.deptInfo.county="")},gitCityList(){""!==this.deptInfo.province&&this.$http.get("/api/org/getCity",{params:{pid:this.deptInfo.province,type:"2"}}).then(e=>{var t=e.data;0==t.errorCode&&(this.cityList=t.data||[],this.getCountyList())}).catch(function(e){console.log(e)})},craetedLoginUrl(){try{if(!this.deptInfo.brandspelllogoram)return this.$message.error("品牌简称为空，无法生成！");if(this.deptInfo.brandspelllogoram.length>0){let e=/^[a-zA-Z]{1,10}$/;if(!e.test(this.deptInfo.brandspelllogoram))return this.$message.error("品牌简称格式不正确！")}let t={brandLogogram:this.deptInfo.brandspelllogoram};this.$http("api/department/getDepartmentLoginUrl",{method:"get",params:t}).then(e=>{if(0!=e.data.errorCode)return this.$message.error(e.data.message);this.$message({message:"成功生成!",type:"success"}),this.deptInfo.loginUrl=e.data.data}).catch(e=>{console.log(e)})}catch(e){console.log(e)}},success(e){try{const a=e.size/1024/1024<3;if(!a)return this.$message({message:"上传图片大小不能超过 3MB!",type:"error"});let s=new FormData;s.append("file",e),this.$http({method:"post",url:"./api/file/uploadthumbCompress",data:s}).then(e=>{if(0!=e.data.errorCode)return this.$message.error(e.data.message);this.deptInfo.brandlogolist=e.data.data||{}})}catch(t){console.log(t)}},changeCityVal(){""!==this.deptInfo.city?(this.deptInfo.county="",this.getCountyList()):(this.countyList=[],this.deptInfo.county="")},getCountyList(){""!==this.deptInfo.city&&this.$http.get("/api/org/getCity",{params:{pid:this.deptInfo.city,type:"3"}}).then(e=>{var t=e.data;0==t.errorCode&&(this.countyList=t.data||[])}).catch(function(e){console.log(e)})},comfirmSubmitDept(){if(""===this.deptInfo.deptName||void 0==this.deptInfo.deptName)return this.$message.error("请输入部门名称");if(void 0==this.$refs.selectDept.selectInfo.key||""===this.$refs.selectDept.selectInfo.key)return this.$message.error("请选择所属部门");if(""===this.deptInfo.sort||void 0==this.deptInfo.sort)return this.$message.error("请输入显示顺序");if(""===this.deptInfo.province||void 0==this.deptInfo.province)return this.$message.error("请选择省份");if(""===this.deptInfo.city||void 0==this.deptInfo.city)return this.$message.error("请选择市");if(""===this.deptInfo.county||void 0==this.deptInfo.county)return this.$message.error("请选择区/县");if(this.deptInfo.brandspelllogoram.length>0){let e=/^[a-zA-Z]{1,10}$/;if(!e.test(this.deptInfo.brandspelllogoram))return this.$message.error("品牌简称格式不正确！")}var e={name:this.deptInfo.deptName,pid:this.$refs.selectDept.selectInfo.key,type:this.deptInfo.deptGender,sort:this.deptInfo.sort,phone:this.deptInfo.deptPhone,provinceId:this.deptInfo.province,cityId:this.deptInfo.city,districtId:this.deptInfo.county,address:this.deptInfo.address,description:this.deptInfo.describe};1===this.$refs.selectDept.selectInfo.key&&(e.brandName=this.deptInfo.brandname,e.brandLogogram=this.deptInfo.brandspelllogoram,e.brandLogoFileId=this.deptInfo.brandlogolist.id,e.brandIntroduce=this.deptInfo.brandintroduce,e.brandUrl=this.deptInfo.officialwebsite);var t="";"insert"==this.deptInfo.mode?t="/api/department/addDepartment":(t="/api/department/updateDepartment",e.departmentId=this.deptInfo.deptId),this.$http.post(t,e).then(e=>{var t=e.data;0==t.errorCode&&(this.$message.success(`${"insert"==this.deptInfo.mode?"新增":"编辑"}成功！`),setTimeout(()=>{this.getDeptTableList(),this.getDeptTree(),this.dialogVisibleDept=!1},1e3))}).catch(function(e){console.log(e)})},removeBrandLogo(){try{this.deptInfo.brandlogolist.thumb_1=""}catch(e){console.log(e)}},comfirmDeleteDept(){return void 0==this.deleteInfo.deptId||""==this.deleteInfo.deptId?this.$message.error("所属部门ID不能为空！"):void 0==this.deleteInfo.reason||""==this.deleteInfo.reason?this.$message.error("请输入删除原因！"):void this.$http.post("/api/department/delDepartment",{departmentId:this.deleteInfo.deptId,deleteRemark:this.deleteInfo.reason}).then(e=>{var t=e.data;0==t.errorCode&&(this.$message.success("删除成功！"),setTimeout(()=>{this.getDeptTableList(),this.getDeptTree(),this.dialogVisibleDelete=!1},1e3))}).catch(function(e){console.log(e)})}}},o=l,r=(a("5097"),a("6691")),d=Object(r["a"])(o,s,i,!1,null,null,null);t["default"]=d.exports},c2aa:function(e,t,a){},cabb:function(e,t,a){"use strict";var s=a("4f65"),i=a.n(s);i.a}}]);