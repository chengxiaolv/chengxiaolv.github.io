(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-276ac746"],{"1af3":function(e,t,s){"use strict";var i=s("f91a"),n=s.n(i);n.a},dc3f:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"loginWarp"},[s("div",{staticClass:"loginContainer",attrs:{id:"bgCanvas"}},[s("div",{staticClass:"login_box"},[s("h1",{staticClass:"login_title"},[s("span",{staticStyle:{color:"#F3893B"}},[e._v(e._s(e.brandInfo.brandName?e.brandInfo.brandName:"星河盟客"))]),e._v(" · 公寓管理系统")]),s("div",{staticClass:"input_box"},[s("span",{staticClass:"icon"}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text",placeholder:"用户名"},domProps:{value:e.username},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.go(t)},input:function(t){t.target.composing||(e.username=t.target.value)}}})]),s("div",{staticClass:"input_box"},[s("span",{staticClass:"icon icon1"}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.loginPassword,expression:"loginPassword"}],attrs:{type:"password",placeholder:"密码"},domProps:{value:e.loginPassword},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.go(t)},input:function(t){t.target.composing||(e.loginPassword=t.target.value)}}})]),s("div",{staticClass:"input_box"},[s("span",{staticClass:"icon icon2"}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.verify,expression:"verify"}],attrs:{type:"text",placeholder:"验证码"},domProps:{value:e.verify},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.go(t)},input:function(t){t.target.composing||(e.verify=t.target.value)}}})]),s("div",{staticClass:"clear input_box img_box"},[s("img",{staticClass:"verifyNum",attrs:{src:e.imgsrc},on:{click:e.changeVerify}}),s("span",{staticClass:"changebtn",on:{click:e.changeVerify}},[e._v("看不清，换一张")])]),s("button",{staticClass:"login_btn",on:{click:e.go,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.go(t)}}},[e._v(" 登录")])])])])},n=[],a={name:"login",data(){return{token:"",imgsrc:"",username:"",loginPassword:"",verify:"",isAlert:!1,loginToken:"",brandInfo:{brandName:""}}},created(){this.$route.query.brand?this.getBrandInfo(this.$route.query.brand):localStorage.removeItem("brandInfo")},mounted(){this.changeVerify()},methods:{getBrandInfo(e){try{this.$http("api/department/getDepartmentBrandData",{method:"get",params:{brandLogogram:e}}).then(e=>{if(0!=e.data.errorCode)return this.$message.error(e.data.message);e.data.data&&(this.brandInfo=e.data.data,window.localStorage["brandInfo"]=JSON.stringify(e.data.data))}).catch(e=>{console.log(e)})}catch(t){console.log(t)}},changeVerify:function(){this.imgsrc="./api/auth/verify_image?time="+(new Date).getTime()},go:function(){var e=this;if(!this.username)return this.isAlert=!0,void this.$alert("请输入用户名","提示",{confirmButtonText:"确定",callback:()=>{e.isAlert=!1},type:"info"});if(!this.loginPassword)return this.isAlert=!0,void this.$alert("请输入密码","提示",{confirmButtonText:"确定",callback:()=>{e.isAlert=!1},type:"info"});if(!this.verify)return this.isAlert=!0,void this.$alert("请输入验证码","提示",{confirmButtonText:"确定",callback:()=>{e.isAlert=!1},type:"info"});this.isAlert=!1;var t={password:this.loginPassword,username:this.username,verifyCode:this.verify};this.$http.post("/api/auth/login",t).then(t=>{if(0==t.data.errorCode){var s=t.data.data,i=s.resourceList||[];let a={childList:[{childList:[],code:"financeHouse",codeList:[],id:62,level:2,name:"房屋",permissions:[],pid:61,sort:1,url:"/financeHouse"}],code:"account",codeList:["financeHouse"],id:61,level:1,name:"财务",permissions:[],pid:0,sort:3,url:"/financeHouse"};i[i.length]=a;for(var n=0;n<i.length;n++)"/"==i[n].url?i[n].iconClass="el-icon-s-home":"/contract"==i[n].url?i[n].iconClass="el-icon-s-check":"/account"==i[n].url?i[n].iconClass="el-icon-s-order":"/operate"==i[n].url?i[n].iconClass="el-icon-s-marketing":"/statistics"==i[n].url?i[n].iconClass="el-icon-s-data":"/dailyRent"==i[n].url?i[n].iconClass="el-icon-s-shop":"/setting"==i[n].url?i[n].iconClass="el-icon-s-tools":"/financeHouse"==i[n].url?i[n].iconClass="el-icon-s-promotion":i[n].iconClass="el-icon-menu";s.resourceList=i,localStorage["user"]=JSON.stringify(s),this.$message({showClose:!0,message:"登录成功",type:"success"}),setTimeout(function(){e.$store.commit("setLogin",{isLogin:!0,showNav:!0,count:"init"});localStorage["requestUrl"];localStorage.removeItem("requestUrl"),e.$nextTick(()=>{e.$router.push({path:t.data.data.resourceList[0].url||""})})},800)}else e.changeVerify(),this.verify="",this.isAlert=!0})}}},o=a,r=(s("1af3"),s("6691")),l=Object(r["a"])(o,i,n,!1,null,null,null);t["default"]=l.exports},f91a:function(e,t,s){}}]);