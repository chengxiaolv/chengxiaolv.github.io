(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-afaf04c4"],{"57fc":function(e,t,a){},"974d":function(e,t,a){"use strict";var s=a("57fc"),l=a.n(s);l.a},f1e6:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"supplier-management"},["-1"!=e.$authority.indexOf("enterpriseTable")?a("div",{staticClass:"search-list"},[a("el-row",[a("el-col",{attrs:{span:5}},[a("el-col",{attrs:{span:6}},[e._v("企业名称")]),a("el-col",{attrs:{span:18}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入企业名称"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)],1),a("el-col",{staticClass:"disp-right pr-10",attrs:{span:19}},["-1"!=e.$authority.indexOf("enterpriseTable")?a("el-button",{staticClass:"el-button el-button--primary",on:{click:e.getPgetSupplierListage}},[e._v("查询")]):e._e(),"-1"!=e.$authority.indexOf("insertEnterprise")?a("el-button",{staticClass:"el-button el-button--primary",on:{click:function(t){return e.detail("add")}}},[e._v("添加企业")]):e._e()],1)],1)],1):e._e(),"-1"!=e.$authority.indexOf("enterpriseTable")?a("div",{staticClass:"content-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""},on:{"cell-click":e.cellclick}},[a("el-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"80"}}),a("el-table-column",{attrs:{prop:"enterpriseName",align:"center",label:"企业名称"}}),a("el-table-column",{attrs:{prop:"bankAccountName",align:"center",label:"开户行企业名"}}),a("el-table-column",{attrs:{prop:"bankName",align:"center",label:"开户银行"}}),a("el-table-column",{attrs:{prop:"bankAccount",align:"center",label:"银行账号"}}),a("el-table-column",{attrs:{prop:"address",align:"center",label:"企业地址"}}),a("el-table-column",{attrs:{prop:"linkMan",align:"center",label:"联系人"}}),a("el-table-column",{attrs:{prop:"phone",align:"center",label:"联系人人手机号"}}),a("el-table-column",{attrs:{prop:"updateTime",align:"center",label:"更新时间"}}),a("el-table-column",{attrs:{prop:"address",align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return["-1"!=e.$authority.indexOf("editEnterprise")?a("span",{staticClass:"greenFont tabOperteBtn"},[e._v("编辑")]):e._e()]}}],null,!1,3681288687)})],1)],1):e._e(),a("div",{staticClass:"el-page"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[10,20,40,50],"page-size":100,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e.dialogVisible?a("div",{staticClass:"my-puple"},[a("el-dialog",{attrs:{title:e.sModeTitle,visible:e.dialogVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"660px","before-close":e.closeActivePuple},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-row",[a("el-row",{staticClass:"each-item"},[a("el-col",{staticClass:"is-required-a",attrs:{span:8}},[e._v("企业名称")]),a("el-col",{attrs:{span:12}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入企业名称",clearable:""},model:{value:e.RowDataStore.enterpriseName,callback:function(t){e.$set(e.RowDataStore,"enterpriseName",t)},expression:"RowDataStore.enterpriseName"}})],1)],1),a("el-row",{staticClass:"each-item"},[a("el-col",{staticClass:"is-required-a",attrs:{span:8}},[e._v("企业联系人")]),a("el-col",{attrs:{span:12}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入企业联系人",clearable:""},model:{value:e.RowDataStore.linkMan,callback:function(t){e.$set(e.RowDataStore,"linkMan",t)},expression:"RowDataStore.linkMan"}})],1)],1),a("el-row",{staticClass:"each-item"},[a("el-col",{staticClass:"is-required-a",attrs:{span:8}},[e._v("企业联系人手机号码")]),a("el-col",{attrs:{span:12}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入企业联系人手机号码",clearable:""},model:{value:e.RowDataStore.phone,callback:function(t){e.$set(e.RowDataStore,"phone",t)},expression:"RowDataStore.phone"}})],1)],1),a("el-row",{staticClass:"each-item"},[a("el-col",{staticClass:"is-required-a",attrs:{span:8}},[e._v("企业地址")]),a("el-col",{attrs:{span:12}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入企业地址",clearable:""},model:{value:e.RowDataStore.address,callback:function(t){e.$set(e.RowDataStore,"address",t)},expression:"RowDataStore.address"}})],1)],1),a("el-row",{staticClass:"each-item"},[a("el-col",{staticClass:"is-required-a",attrs:{span:8}},[e._v("开户企业名")]),a("el-col",{attrs:{span:12}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入开户企业名",clearable:""},model:{value:e.RowDataStore.bankAccountName,callback:function(t){e.$set(e.RowDataStore,"bankAccountName",t)},expression:"RowDataStore.bankAccountName"}})],1)],1),a("el-row",{staticClass:"each-item"},[a("el-col",{staticClass:"is-required-a",attrs:{span:8}},[e._v("开户银行")]),a("el-col",{attrs:{span:6}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择开户银行"},model:{value:e.RowDataStore.bankType,callback:function(t){e.$set(e.RowDataStore,"bankType",t)},expression:"RowDataStore.bankType"}},e._l(e.banks,function(e){return a("el-option",{key:e.id,attrs:{label:e.bankName,value:e.id}})}),1)],1),a("el-col",{staticStyle:{"font-size":"14px"},attrs:{span:4,offset:1}},[a("el-button",{staticClass:"greenBtn",on:{click:function(t){e.dialogVisibleBank=!0}}},[e._v("添加银行名称")])],1)],1),a("el-row",{staticClass:"each-item"},[a("el-col",{staticClass:"is-required-a",attrs:{span:8}},[e._v("银行账号")]),a("el-col",{attrs:{span:12}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入银行账号",clearable:""},model:{value:e.RowDataStore.bankAccount,callback:function(t){e.$set(e.RowDataStore,"bankAccount",t)},expression:"RowDataStore.bankAccount"}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.notarizeUpde}},[e._v("确 定")]),a("el-button",{staticClass:"greenBtn",on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")])],1)],1)],1):e._e(),e.dialogVisibleBank?a("div",{staticClass:"my-puple"},[a("el-dialog",{attrs:{title:"添加银行",visible:e.dialogVisibleBank,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"660px","before-close":function(){e.dialogVisibleBank=!1}},on:{"update:visible":function(t){e.dialogVisibleBank=t}}},[a("el-row",[a("el-row",{staticClass:"each-item"},[a("el-col",{staticClass:"is-required-a",attrs:{span:8}},[e._v("银行名称")]),a("el-col",{attrs:{span:12}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入银行名称",clearable:""},model:{value:e.bankNameValue,callback:function(t){e.bankNameValue=t},expression:"bankNameValue"}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addBank}},[e._v("确 定")]),a("el-button",{staticClass:"greenBtn",on:{click:function(t){e.dialogVisibleBank=!1}}},[e._v("取 消")])],1)],1)],1):e._e()])},l=[],n=a("90b9"),i=a("729c"),o={name:"supplier-management",data(){return{value:"",tableData:[],banksValue:"",currentPage:1,dialogVisible:!1,dialogVisibleBank:!1,total:0,clickRowData:{},RowDataStore:{},iDefalutNumber:10,banks:[],bankNameValue:"",sModeTitle:"",clickTtype:""}},created(){this.init()},mounted(){},methods:{async cellclick(e,t,a,s){if("编辑"==s.target.innerText){this.clickRowData=e;var l=await Object(i["l"])();this.banks=l.data.data,this.detail("upde")}},addBank(){try{let t=this,a={bankName:t.bankNameValue};Object(i["d"])(a).then(e=>{e.data.result&&this.$message({message:e.data.message,type:"success"})}).then(()=>{t.dialogVisibleBank=!1})}catch(e){console.log(e)}},notarizeUpdeJudge(){return this.RowDataStore.enterpriseName?this.RowDataStore.linkMan?Object(n["c"])(this.RowDataStore.phone)?this.RowDataStore.address&&this.RowDataStore.address.length>0&&this.RowDataStore.address.length<30?this.RowDataStore.bankAccountName?this.RowDataStore.bankType?!!this.RowDataStore.bankAccount||(this.$message({message:"银行账号不能为空",type:"warning"}),!1):(this.$message({message:"开户银行不能为空",type:"warning"}),!1):(this.$message({message:"开户企业名不能为空",type:"warning"}),!1):(this.$message({message:"企业地址格式不正确",type:"warning"}),!1):(this.$message({message:"企业联系人手机号码格式错误",type:"warning"}),!1):(this.$message({message:"企业联系人不能为空",type:"warning"}),!1):(this.$message({message:"企业名称不能为空",type:"warning"}),!1)},notarizeUpde(){try{let t=this;if(!t.notarizeUpdeJudge())return;let a={enterpriseId:t.RowDataStore.enterpriseId,enterpriseName:t.RowDataStore.enterpriseName,linkMan:t.RowDataStore.linkMan,phone:t.RowDataStore.phone,address:t.RowDataStore.address,bankType:t.RowDataStore.bankType,bankAccount:t.RowDataStore.bankAccount,bankAccountName:t.RowDataStore.bankAccountName};if("add"===t.clickTtype){if(!Object(n["c"])(a.phone))return void t.$message({message:"手机号码格式不正确",type:"warning"});if(16!=a.bankAccount.length&&19!=a.bankAccount.length)return void t.$message({message:"银行卡格式不正确",type:"warning"});if(!(a.enterpriseName&&a.linkMan&&a.address&&a.bankType&&a.bankAccount&&a.bankAccountName))return void t.$message({message:"以上信息必填，不可不填",type:"warning"})}Object(i["k"])(a).then(e=>{e.data.result&&(t.$message({message:e.data.message,type:"success"}),t.getPgetSupplierListage(),t.dialogVisible=!1)})}catch(e){console.log(e)}},async detail(e){try{let s=this;if(s.clickTtype=e,"upde"===e){s.sModeTitle="编辑企业";let e={enterpriseId:s.clickRowData.enterpriseId};Object(i["s"])(e).then(e=>{s.RowDataStore=e.data.data,s.dialogVisible=!0})}else{if(s.sModeTitle="添加企业",s.banks.length<=0){var t=await Object(i["l"])();s.banks=t.data.data}s.RowDataStore={enterpriseId:"",enterpriseName:"",linkMan:"",phone:"",address:"",bankType:"",bankAccount:"",bankAccountName:""},s.dialogVisible=!0}}catch(a){console.log(a)}},getPgetSupplierListage(){try{let t=this,a={enterpriseName:Object(n["m"])(t.value),currentPage:t.currentPage,pageSize:t.iDefalutNumber};Object(i["kb"])(a).then(e=>{t.tableData=JSON.parse(JSON.stringify(e.data.data.content)),t.total=e.data.data.total,t.tableData.map((e,t,a)=>{e.updateTime=e.updateTime.replace("T"," ").substr(0,19)})}).catch(e=>{console.log(e)})}catch(e){console.log(e)}},init(){this.getPgetSupplierListage()},handleSizeChange(e){this.currentPage=1,this.iDefalutNumber=e,this.getPgetSupplierListage()},handleCurrentChange(e){this.currentPage=e,this.getPgetSupplierListage()},closeActivePuple(){this.dialogVisible=!1}}},r=o,c=(a("974d"),a("6691")),p=Object(c["a"])(r,s,l,!1,null,null,null);t["default"]=p.exports}}]);