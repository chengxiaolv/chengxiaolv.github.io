(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-62b3165c"],{"040d":function(e,t,a){"use strict";var s=a("b1c4"),i=a.n(s);i.a},"5e27":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"information"},["-1"!=e.$authority.indexOf("infoTable")?a("div",{staticClass:"search-list"},[a("el-row",{attrs:{span:24}},[a("el-col",{attrs:{span:24}},[a("el-col",{attrs:{span:1}},[e._v("城市")]),a("el-col",{attrs:{span:2}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择城市"},on:{change:e.getInformationPage},model:{value:e.sPorjectValuenew2,callback:function(t){e.sPorjectValuenew2=t},expression:"sPorjectValuenew2"}},e._l(e.newpors,function(e){return a("el-option",{key:e.id,attrs:{label:e.cityName,value:e.id}})}),1)],1),a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:2}},[e._v("发布时间")]),a("el-col",{attrs:{span:6}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetimerange","range-separator":"-","default-time":["00:00:00","23:59:59"],"start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.aStartToEnd,callback:function(t){e.aStartToEnd=t},expression:"aStartToEnd"}})],1),a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:2}},[e._v("资讯类型")]),a("el-col",{attrs:{span:2}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择"},model:{value:e.sInformationTypesValue,callback:function(t){e.sInformationTypesValue=t},expression:"sInformationTypesValue"}},e._l(e.aInformationTypes,function(e){return a("el-option",{key:e.val,attrs:{label:e.text,value:e.val}})}),1)],1),a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:2}},[e._v("资讯标题")]),a("el-col",{attrs:{span:3}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入资讯标题",clearable:""},model:{value:e.sTitleInformation,callback:function(t){e.sTitleInformation=t},expression:"sTitleInformation"}})],1),a("el-col",{staticClass:"disp-right",attrs:{span:4}},["-1"!=e.$authority.indexOf("infoTable")?a("el-button",{staticClass:"el-button el-button--primary",on:{click:function(t){return e.getSubSearchInformationPage()}}},[e._v("查询")]):e._e(),"-1"!=e.$authority.indexOf("insertInfo")?a("el-button",{staticClass:"el-button el-button--primary",on:{click:function(t){return e.initAddInformationData()}}},[e._v("新增资讯")]):e._e()],1)],1)],1)],1):e._e(),"-1"!=e.$authority.indexOf("infoTable")?a("div",{staticClass:"content-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""},on:{"row-click":e.getRowDatas}},[a("el-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"80"}}),a("el-table-column",{attrs:{prop:"cityIds",align:"center",label:"所在城市"}}),a("el-table-column",{attrs:{prop:"title",align:"center",label:"资讯标题"}}),a("el-table-column",{attrs:{prop:"informationTypeEnum.text",align:"center",label:"资讯类型"}}),a("el-table-column",{attrs:{prop:"clickNum",align:"center",label:"点击量"}}),a("el-table-column",{attrs:{prop:"informationStateEnum.text",align:"center",label:"状态"}}),a("el-table-column",{attrs:{prop:"sysUserName",align:"center",label:"发布人"}}),a("el-table-column",{attrs:{prop:"sysUserPhone",align:"center",label:"发布人手机号"}}),a("el-table-column",{attrs:{prop:"createTime",align:"center",label:"发布时间"}}),a("el-table-column",{attrs:{prop:"informationStateEnum.text",align:"center",width:"160",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return["-1"!=e.$authority.indexOf("infoDetail")?a("span",{staticClass:"greenFont tabOperteBtn",on:{click:function(t){return e.Operation("details")}}},[e._v("详情")]):e._e(),"-1"!=e.$authority.indexOf("infoEdit")?a("span",{staticClass:"greenFont tabOperteBtn",on:{click:function(t){return e.Operation("alter")}}},[e._v("修改")]):e._e(),0!==t.row.state&&2!==t.row.state||"-1"==e.$authority.indexOf("infoPublish")?e._e():a("span",{staticClass:"greenFont tabOperteBtn",on:{click:function(t){return e.announceSubt(0)}}},[a("span",[e._v("发布")])]),1===t.row.state?a("span",{staticClass:"greenFont tabOperteBtn",on:{click:function(t){return e.announceSubt(1)}}},[e._v("下线")]):e._e()]}}],null,!1,3798389823)})],1)],1):e._e(),a("div",{staticClass:"el-page"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[10,20,30,40,50],"page-size":100,layout:"total, sizes, prev, pager, next, jumper",total:e.itotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("div",{staticClass:"my-puple"},[e.dialogVisible?a("el-dialog",{attrs:{title:"详情资讯",visible:e.dialogVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"1000px","before-close":function(){return e.dialogVisible=!1}},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-row",[a("el-row",{staticClass:"each-item"},[a("el-col",{staticClass:"is-required-a",attrs:{span:4}},[e._v("发布城市")]),a("el-col",{attrs:{span:16}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"",multiple:"",placeholder:"请选择"},model:{value:e.adetailslook,callback:function(t){e.adetailslook=t},expression:"adetailslook"}},e._l(e.newpors,function(e){return a("el-option",{key:e.id,attrs:{label:e.cityName,value:e.id}})}),1)],1)],1),a("el-row",{staticClass:"each-item"},[a("el-col",{staticClass:"is-required-a",attrs:{span:4}},[e._v("资讯标题")]),a("el-col",{attrs:{span:16}},[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:"",placeholder:"请输入话题名称，2(含) ~ 40个字以内(含)",clearable:""},model:{value:e.sAnnounceTitle,callback:function(t){e.sAnnounceTitle=t},expression:"sAnnounceTitle"}})],1)],1),a("el-row",{staticClass:"each-item"},[a("el-col",{staticClass:"is-required-a",attrs:{span:4}},[e._v("资讯类型")]),a("el-col",{attrs:{span:16}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"",placeholder:"请选择"},model:{value:e.sAlterShareTypeValue,callback:function(t){e.sAlterShareTypeValue=t},expression:"sAlterShareTypeValue"}},e._l(e.aShareType,function(e){return a("el-option",{key:e.val,attrs:{label:e.label,value:e.val}})}),1)],1)],1),a("el-row",{staticClass:"each-item"},[a("el-col",{staticClass:"is-required-a",attrs:{span:4}},[e._v("发布状态")]),a("el-col",{attrs:{span:16}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"",placeholder:"请选择"},model:{value:e.aAnnounceStateValue,callback:function(t){e.aAnnounceStateValue=t},expression:"aAnnounceStateValue"}},e._l(e.aAnnounceState,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.val}})}),1)],1)],1),a("el-row",{staticClass:"each-item"},[a("el-col",{staticClass:"is-required-a",attrs:{span:4}},[e._v("内容类型")]),a("el-col",{attrs:{span:16}},[a("el-radio-group",{attrs:{disabled:""},model:{value:e.iAnnounceContentType,callback:function(t){e.iAnnounceContentType=t},expression:"iAnnounceContentType"}},[a("el-radio",{attrs:{label:0}},[e._v("按内容")]),a("el-radio",{attrs:{label:1}},[e._v("按网址")])],1)],1)],1),a("el-row",{directives:[{name:"show",rawName:"v-show",value:1==e.iAnnounceContentType,expression:"iAnnounceContentType==1"}],staticClass:"each-item"},[a("el-col",{staticClass:"is-required-a",attrs:{span:4}},[e._v("网址")]),a("el-col",{attrs:{span:16}},[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:"",placeholder:"请输入网址",clearable:""},model:{value:e.aUrl,callback:function(t){e.aUrl=t},expression:"aUrl"}})],1)],1),a("el-row",{directives:[{name:"show",rawName:"v-show",value:0==e.iAnnounceContentType,expression:"iAnnounceContentType==0"}],staticClass:"each-item"},[a("el-col",{staticClass:"is-required-a",attrs:{span:4}},[e._v("资讯内容")]),a("el-col",{attrs:{span:16}},[a("Edio",{ref:"editor",attrs:{getValue:e.msg}})],1)],1),a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.oImgFiles,expression:"oImgFiles"}],staticClass:"each-item"},[a("el-col",{staticClass:"is-required-a",attrs:{span:4}},[e._v("图片")]),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"upload-img-box"},[a("img",{attrs:{src:e.oImgFiles.thumb_1,alt:"",width:"120",height:"90"}})])])],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"greenBtn",on:{click:function(t){e.dialogVisible=!1}}},[e._v("关闭")])],1)],1):e._e(),e.dialogVisible1?a("el-dialog",{attrs:{title:"修改资讯",visible:e.dialogVisible1,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"1000px","before-close":function(){return e.dialogVisible1=!1}},on:{"update:visible":function(t){e.dialogVisible1=t}}},[a("el-row",[a("el-row",{staticClass:"each-item"},[a("el-col",{staticClass:"is-required-a",attrs:{span:4}},[e._v("发布城市")]),a("el-col",{attrs:{span:16}},[a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:"请选择"},model:{value:e.sPeojectListValue,callback:function(t){e.sPeojectListValue=t},expression:"sPeojectListValue"}},e._l(e.newpors,function(e){return a("el-option",{key:e.id,attrs:{label:e.cityName,value:e.id}})}),1)],1)],1),a("el-row",{staticClass:"each-item"},[a("el-col",{staticClass:"is-required-a",attrs:{span:4}},[e._v("资讯标题")]),a("el-col",{attrs:{span:16}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入话题名称，2(含) ~ 40个字以内(含)",clearable:""},model:{value:e.sAnnounceTitle,callback:function(t){e.sAnnounceTitle=t},expression:"sAnnounceTitle"}})],1)],1),a("el-row",{staticClass:"each-item"},[a("el-col",{staticClass:"is-required-a",attrs:{span:4}},[e._v("资讯类型")]),a("el-col",{attrs:{span:16}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.sAlterShareTypeValue,callback:function(t){e.sAlterShareTypeValue=t},expression:"sAlterShareTypeValue"}},e._l(e.aInformationTypes,function(e){return a("el-option",{key:e.val,attrs:{label:e.text,value:e.val}})}),1)],1)],1),a("el-row",{staticClass:"each-item"},[a("el-col",{staticClass:"is-required-a",attrs:{span:4}},[e._v("发布状态")]),a("el-col",{attrs:{span:16}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.aAnnounceStateValue,callback:function(t){e.aAnnounceStateValue=t},expression:"aAnnounceStateValue"}},e._l(e.aAnnounceState,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.val}})}),1)],1)],1),a("el-row",{staticClass:"each-item"},[a("el-col",{staticClass:"is-required-a",attrs:{span:4}},[e._v("内容类型")]),a("el-col",{attrs:{span:16}},[a("el-radio-group",{model:{value:e.iAnnounceContentType,callback:function(t){e.iAnnounceContentType=t},expression:"iAnnounceContentType"}},[a("el-radio",{attrs:{label:0}},[e._v("按内容")]),a("el-radio",{attrs:{label:1}},[e._v("按网址")])],1)],1)],1),a("el-row",{directives:[{name:"show",rawName:"v-show",value:1==e.iAnnounceContentType,expression:"iAnnounceContentType==1"}],staticClass:"each-item"},[a("el-col",{staticClass:"is-required-a",attrs:{span:4}},[e._v("网址")]),a("el-col",{attrs:{span:16}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入网址",clearable:""},model:{value:e.aUrl,callback:function(t){e.aUrl=t},expression:"aUrl"}})],1)],1),a("el-row",{directives:[{name:"show",rawName:"v-show",value:0==e.iAnnounceContentType,expression:"iAnnounceContentType==0"}],staticClass:"each-item"},[a("el-col",{staticClass:"is-required-a",attrs:{span:4}},[e._v("资讯内容")]),a("el-col",{staticClass:"editero",attrs:{span:16}},[a("Edio",{ref:"editor",attrs:{getValue:e.msg}})],1)],1),a("el-row",{staticClass:"each-item"},[a("el-col",{staticClass:"is-required-a",attrs:{span:4}},[e._v("图片")]),a("el-col",{attrs:{span:16}},[a("el-row",[a("el-upload",{attrs:{action:"","before-upload":e.getIncomeUploadImg,accept:"image",multiple:!1,"show-file-list":!1}},[a("div",{staticClass:"input-pic-box"},[a("el-button",{staticClass:"upload-bg"},[e._v("上传图片")]),a("p",{staticClass:"hint"},[e._v("只能上传1张，支持png.jpg，尺寸690*345")])],1)])],1),e.oImgFiles?a("div",{staticClass:"upload-img-box"},[a("i",{staticClass:"el-icon-close",on:{click:function(t){return e.removeUploadImgOrigin("dtls")}}}),a("img",{attrs:{src:e.oImgFiles.thumb_2,alt:"",width:"120",height:"90"}})]):e._e()],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.modifyInformation()}}},[e._v("确 认")]),a("el-button",{staticClass:"greenBtn",on:{click:function(t){e.dialogVisible1=!1}}},[e._v("取 消")])],1)],1):e._e(),e.dialogVisible2?a("el-dialog",{attrs:{title:"新增资讯",visible:e.dialogVisible2,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"1000px","before-close":function(){return e.dialogVisible2=!1}},on:{"update:visible":function(t){e.dialogVisible2=t}}},[a("el-row",[a("el-row",{staticClass:"each-item"},[a("el-col",{staticClass:"is-required-a",attrs:{span:4}},[e._v("发布城市")]),a("el-col",{attrs:{span:16}},[a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:"请选择"},model:{value:e.sPeojectListValue,callback:function(t){e.sPeojectListValue=t},expression:"sPeojectListValue"}},e._l(e.newpors,function(e){return a("el-option",{key:e.id,attrs:{label:e.cityName,value:e.id}})}),1)],1)],1),a("el-row",{staticClass:"each-item"},[a("el-col",{staticClass:"is-required-a",attrs:{span:4}},[e._v("资讯标题")]),a("el-col",{attrs:{span:16}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入话题名称，2(含) ~ 40个字以内(含)",clearable:""},model:{value:e.sAnnounceTitle,callback:function(t){e.sAnnounceTitle=t},expression:"sAnnounceTitle"}})],1)],1),a("el-row",{staticClass:"each-item"},[a("el-col",{staticClass:"is-required-a",attrs:{span:4}},[e._v("资讯类型")]),a("el-col",{attrs:{span:16}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.sAlterShareTypeValue,callback:function(t){e.sAlterShareTypeValue=t},expression:"sAlterShareTypeValue"}},e._l(e.aInformationTypes,function(e){return a("el-option",{key:e.val,attrs:{label:e.text,value:e.val}})}),1)],1)],1),a("el-row",{staticClass:"each-item"},[a("el-col",{staticClass:"is-required-a",attrs:{span:4}},[e._v("发布状态")]),a("el-col",{attrs:{span:16}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.aAnnounceStateValue,callback:function(t){e.aAnnounceStateValue=t},expression:"aAnnounceStateValue"}},e._l(e.aAnnounceState,function(e){return a("el-option",{key:e.val,attrs:{label:e.label,value:e.val}})}),1)],1)],1),a("el-row",{staticClass:"each-item"},[a("el-col",{staticClass:"is-required-a",attrs:{span:4}},[e._v("内容类型")]),a("el-col",{attrs:{span:16}},[a("el-radio-group",{model:{value:e.iAnnounceContentType,callback:function(t){e.iAnnounceContentType=t},expression:"iAnnounceContentType"}},[a("el-radio",{attrs:{label:0}},[e._v("按内容")]),a("el-radio",{attrs:{label:1}},[e._v("按网址")])],1)],1)],1),a("el-row",{directives:[{name:"show",rawName:"v-show",value:1==e.iAnnounceContentType,expression:"iAnnounceContentType==1"}],staticClass:"each-item"},[a("el-col",{staticClass:"is-required-a",attrs:{span:4}},[e._v("网址")]),a("el-col",{attrs:{span:16}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入网址",clearable:""},model:{value:e.aUrl,callback:function(t){e.aUrl=t},expression:"aUrl"}})],1)],1),a("el-row",{directives:[{name:"show",rawName:"v-show",value:0==e.iAnnounceContentType,expression:"iAnnounceContentType==0"}],staticClass:"each-item"},[a("el-col",{staticClass:"is-required-a",attrs:{span:4}},[e._v("资讯内容")]),a("el-col",{attrs:{span:16}},[a("Edio",{ref:"editor",attrs:{getValue:e.msg}})],1)],1),a("el-row",{staticClass:"each-item"},[a("el-col",{staticClass:"is-required-a",attrs:{span:4}},[e._v("图片")]),a("el-col",{attrs:{span:16}},[a("el-row",[a("el-upload",{attrs:{"show-file-list":!1,accept:"image",multiple:!1,"before-upload":e.getIncomeUploadImg,action:""}},[a("div",{staticClass:"input-pic-box"},[a("el-button",{staticClass:"upload-bg"},[e._v("上传图片")]),a("p",{staticClass:"hint"},[e._v("只能上传1张，支持png.jpg，尺寸690*345")])],1)])],1),""!=e.oImgFiles?a("div",{staticClass:"upload-img-box"},[a("i",{staticClass:"el-icon-close",on:{click:function(t){return e.removeUploadImgOrigin("add")}}}),a("img",{attrs:{src:e.oImgFiles.thumb_2,alt:"",width:"120",height:"90"}})]):e._e()],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addInformation()}}},[e._v("发 布")]),a("el-button",{staticClass:"greenBtn",on:{click:function(t){e.dialogVisible2=!1}}},[e._v("取 消")])],1)],1):e._e()],1)])},i=[],l=a("37b8"),n=a("591a"),o=a("f24a"),r=a.n(o),c=a("b881"),u=a("3f88"),d=(a("49f2"),a("90b9")),p=a("729c"),h={name:"information",components:{Edio:l["a"],VueUeditorWrap:r.a,quillEditor:c["quillEditor"],myEditor:u["a"]},data(){return{ms:"<p>请输入，1(含)~10000个字以内(含)，不限图片张数</p>",aPeojectList:[],sPeojectListValue:[],adetailslook:[],itotal:0,aInformationTypes:[],sInformationTypesValue:"",sTitleInformation:"",sPorjectValue2:"",sAnnounceTitle:"",aShareType:[{val:"",label:""}],aAnnounceState:[{val:"",label:""}],aAnnounceStateValue:"",iAnnounceContentType:0,aUrl:"",oImgFiles:"",sAlterShareTypeValue:"",iInformationid:"",iInformationStateCode:"",sUploadImgId:"",value:"",aStartToEnd:[],tableData:[],sPorjectValuenew2:"",form:{name:""},param:"",sNewPeojectListValue:"",sUploadImgUrl:{thumb_2:""},sAnnounceDetailsData:{},currentPage:1,iDefalutNumber:10,dialogVisible:!1,dialogVisible1:!1,dialogVisible2:!1,msg:"请输入，1(含)~10000个字以内(含)，不限图片张数",myConfig:{autoHeightEnabled:!1,initialFrameHeight:480,initialFrameWidth:"100%",serverUrl:"http://35.201.165.105:8000/controller.php",UEDITOR_HOME_URL:"UEditor/"},newpors:[]}},created(){this.init()},computed:{...Object(n["b"])({project:"getPeojectList"})},mounted(){},methods:{init(){this.getproj()},getproj(){this.$http.get("/api/org/GetValidCity").then(e=>{this.newpors=e.data.data,this.sPorjectValuenew2=this.newpors.length>0?this.newpors[0].id:""}).then(()=>{this.sPorjectValuenew2&&this.getInformationPage(),this.getInformationTypes()}).catch(e=>{console.log(e)})},onEditorChange(e){console.log(e)},initAddInformationData(){let e=this;this.oImgFiles="",this.sUploadImgUrl.thumb_2="",this.sPeojectListValue="",this.aAnnounceStateValue="",this.sAnnounceTitle="",this.dialogVisible2=!0,this.sAlterShareTypeValue="",this.msg="",this.aAnnounceState=[{label:"待发布",val:0},{label:"新增并发布",val:1}],e.$nextTick(function(){e.$refs.editor.editorinit(e.$refs.editor.$refs.editor)})},addInformation(){if(this.sPeojectListValue.length<=0)return void this.$message.error("项目不能为空！");if(this.sAnnounceTitle.length<=2||this.sAnnounceTitle.length>40)return void this.$message.error("资讯标题字数不合格");if(""===this.sAlterShareTypeValue)return void this.$message.error("资讯类型不能为空");if(""===this.aAnnounceStateValue)return void this.$message.error("发布状态不能为空");if(1==this.iAnnounceContentType&&this.aUrl.length<=0)return void this.$message.error("网址不能为空");if(0==this.iAnnounceContentType&&this.$refs.editor.editorVal.length<=0)return void this.$message.error("资讯内容不能为空");if(!this.sUploadImgUrl.url)return void this.$message.error("图片不能为空,需手动上传其他图片");this.dialogVisible2=!0,this.sPeojectListValue.forEach(e=>{this.sNewPeojectListValue+=`${e},`});let e={title:Object(d["m"])(this.sAnnounceTitle),type:this.sAlterShareTypeValue,state:this.aAnnounceStateValue,contentType:this.iAnnounceContentType,content:this.$refs.editor.editorVal||"",url:this.aUrl,cityIds:this.sNewPeojectListValue};this.sUploadImgId&&(e.fileIds=this.sUploadImgId),Object(p["g"])(e).then(e=>{0==e.data.errorCode&&(this.$message({message:"新增资讯成功",type:"success"}),this.getInformationPage(),this.dialogVisible2=!1)}).catch(e=>{console.log(e)})},announceSubt(e){var t=this;sessionStorage["params"]="announce";let a=0==e?"是否发布当前资讯？":"是否下线当前资讯？",s=0==e?1:2;this.$confirm(a,{confirmButtonText:"确定",cancelButtonText:"取消",type:"info",center:!0}).then(()=>{let e={id:this.iInformationid,state:s};Object(p["y"])(e).then(e=>{0==e.data.errorCode&&(t.getInformationPage(),t.$message({message:"操作成功！",type:"success"}))}).catch(e=>{console.log(e)})}).catch(()=>{})},removeUploadImgOrigin(e){"add"===e?this.oImgFiles="":"dtls"===e&&(this.oImgFiles="")},Operation(e){console.log(e);"details"==e?sessionStorage["params"]="details":"alter"==e?(this.sUploadImgId="",sessionStorage["params"]="alter"):"announce"==e&&(sessionStorage["params"]="announce")},modifyInformation(){if(this.sPeojectListValue.length<=0)return void this.$message({message:"项目不能为空",type:"warning"});if(this.sAnnounceTitle.length<=0)return void this.$message({message:"资讯标题不能为空",type:"warning"});if(""===this.aAnnounceStateValue)return void this.$message({message:"发布状态不能为空",type:"warning"});if(1==this.iAnnounceContentType&&this.aUrl.length<=0)return void this.$message({message:"网址不能为空",type:"warning"});if(0==this.iAnnounceContentType&&this.$refs.editor.editorVal.length<=0)return void this.$message({message:"资讯内容不能为空",type:"warning"});if(!this.oImgFiles)return void this.$message({message:"图片不能为空,需手动上传其他图片",type:"warning"});let e={id:this.iInformationid,title:Object(d["m"])(this.sAnnounceTitle),type:this.sAlterShareTypeValue,state:this.aAnnounceStateValue,contentType:this.iAnnounceContentType,content:this.$refs.editor.editorVal||"",url:this.aUrl,cityIds:this.sPeojectListValue.join(","),fileIds:this.sUploadImgId};Object(p["x"])(e).then(e=>{0==e.data.errorCode&&(this.$message({message:"修改成功",type:"success"}),this.getInformationPage(),this.dialogVisible1=!1)}).catch(e=>{console.log(e)})},getInformationPage(){let e={currentPage:this.currentPage,pageSize:this.iDefalutNumber,cityId:this.sPorjectValuenew2,type:this.sInformationTypesValue,title:Object(d["m"])(this.sTitleInformation)};Object(p["bb"])(e).then(e=>{let t={...e.data.data};this.tableData=t.content,this.itotal=t.total,e=e.data.data}).catch(e=>{console.log(e)})},getInformationTypes(){Object(p["cb"])().then(e=>{let t=JSON.parse(JSON.stringify(e.data.data));this.aInformationTypes=t}).catch(e=>{})},getInformationContentTypes(){Object(p["ab"])().then(e=>{let t=JSON.parse(JSON.stringify(e.data.data));t.map((e,t,a)=>{e.label=e.text,e.value=e.val}),this.aInformationTypes=t}).catch(e=>{console.log(e)})},getSubSearchInformationPage(){if(!this.sPorjectValuenew2)return;let e={currentPage:this.currentPage,pageSize:this.iDefalutNumber,cityId:this.sPorjectValuenew2,type:this.sInformationTypesValue,title:Object(d["m"])(this.sTitleInformation)};this.aStartToEnd&&(e.startCreateTime=this.aStartToEnd[0],e.endCreateTime=this.aStartToEnd[1]),Object(p["bb"])(e).then(e=>{let t={...e.data.data};this.tableData=t.content,this.itotal=t.total,e=e.data.data}).catch(e=>{console.log(e)})},getProjects(){},handleSizeChange(e){this.iDefalutNumber=e,this.getSubSearchInformationPage()},getRowDatas(e,t,a){let s=this;this.iInformationid=e.id,this.iInformationStateCode=e.state,console.log(e,t,a),"详情"==a.target.innerText&&"修改"==a.target.innerText||(this.adetailslook=[],Object(p["db"])(e.id).then(e=>{this.sAnnounceDetailsData={...e.data.data},this.aPeojectList=this.sAnnounceDetailsData.cityList,this.sPeojectListValue=[],this.msg=this.sAnnounceDetailsData.information.content,this.aShareType[0].val=this.sAnnounceDetailsData.information.informationTypeEnum.val,this.aShareType[0].label=this.sAnnounceDetailsData.information.informationTypeEnum.text,this.aAnnounceState[0].val=this.sAnnounceDetailsData.information.informationStateEnum.val,this.aAnnounceState[0].label=this.sAnnounceDetailsData.information.informationStateEnum.text,this.sAlterShareTypeValue=this.sAnnounceDetailsData.information.informationTypeEnum.val,this.aAnnounceStateValue=this.sAnnounceDetailsData.information.informationStateEnum.val,"details"==sessionStorage["params"]?this.dialogVisible=!0:"alter"==sessionStorage["params"]?this.dialogVisible1=!0:sessionStorage["params"],this.aPeojectList.forEach(e=>{this.dialogVisible?(console.log(e.id),this.adetailslook.push(e.id)):(this.dialogVisible1||this.dialogVisible2)&&this.sPeojectListValue.push(e.id)}),this.sAnnounceTitle=Object(d["m"])(this.sAnnounceDetailsData.information.title),this.iAnnounceContentType=this.sAnnounceDetailsData.information.contentType,this.aUrl=this.sAnnounceDetailsData.information.url,this.oImgFiles=this.sAnnounceDetailsData.imgFile?this.sAnnounceDetailsData.imgFile:"",s.$nextTick(function(){s.$refs.editor.editorinit(s.$refs.editor.$refs.editor)})}).then(()=>{}).catch(e=>{console.log(e)}))},getIncomeUploadImg(e){const t=e.size/1024/1024<=3;if(!t)return this.$message({message:"上传图片大小不能超过 3MB!",type:"error"});let a=new FormData;a.append("file",e),this.$http({method:"post",url:"./api/file/uploadthumbCompress",data:a}).then(e=>{this.sUploadImgUrl=e.data.data,this.oImgFiles=e.data.data,this.sUploadImgId=e.data.data.id})},handleCurrentChange(e){this.currentPage=e,this.getSubSearchInformationPage()}}},m=h,g=(a("040d"),a("6691")),f=Object(g["a"])(m,s,i,!1,null,null,null);t["default"]=f.exports},b1c4:function(e,t,a){}}]);