(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-523a7fdb"],{3577:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"application-invoice"},["-1"!=e.$authority.indexOf("invoiceTable")?a("div",{staticClass:"search-list"},[a("el-row",[a("el-col",{attrs:{span:18}},[a("el-col",{attrs:{span:1}},[e._v("项目")]),a("el-col",{attrs:{span:4}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择项目"},on:{change:e.getInvoicePage},model:{value:e.PrjectValue,callback:function(t){e.PrjectValue=t},expression:"PrjectValue"}},e._l(e.orgLIst,function(e){return a("el-option",{key:e.orgId,attrs:{label:e.orgName,value:e.orgId}})}),1)],1),a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:2}},[e._v("发布时间")]),a("el-col",{attrs:{span:8}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetimerange","default-time":["00:00:00","23:59:59"],"range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.TimeStartandEnd,callback:function(t){e.TimeStartandEnd=t},expression:"TimeStartandEnd"}})],1),a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:2}},[e._v("状态")]),a("el-col",{attrs:{span:4}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择状态"},model:{value:e.StateValue,callback:function(t){e.StateValue=t},expression:"StateValue"}},e._l(e.StateList,function(e){return a("el-option",{key:e.val,attrs:{label:e.text,value:e.val}})}),1)],1)],1),a("el-col",{staticClass:"disp-right",attrs:{span:6}},["-1"!=e.$authority.indexOf("invoiceTable")?a("el-button",{staticClass:"el-button el-button--primary",on:{click:e.getInvoicePage}},[e._v("查询")]):e._e()],1)],1)],1):e._e(),"-1"!=e.$authority.indexOf("invoiceTable")?a("div",{staticClass:"content-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.aHomeTableData,border:""}},[a("el-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"80"}}),a("el-table-column",{attrs:{prop:"orgName",align:"center",label:"所在项目"}}),a("el-table-column",{attrs:{prop:"roomName",align:"center",label:"房号"}}),a("el-table-column",{attrs:{prop:"createrCusName",align:"center",label:"申请人"}}),a("el-table-column",{attrs:{prop:"createrPhone",align:"center",label:"申请人手机号"}}),a("el-table-column",{attrs:{prop:"stateTypeEnum.text",align:"center",label:"状态"}}),a("el-table-column",{attrs:{prop:"invoiceTitle",align:"center",label:"发票抬头"}}),a("el-table-column",{attrs:{prop:"feeTypeEnum.text",align:"center",label:"费用类型"}}),a("el-table-column",{attrs:{prop:"applyTime",align:"center",label:"发票发生月份"}}),a("el-table-column",{attrs:{prop:"applyContent",align:"center",label:"申请内容"}}),a("el-table-column",{attrs:{prop:"remark",align:"center",label:"最新备注内容"}}),a("el-table-column",{attrs:{prop:"invoiceTypeEnum.text",align:"center",label:"发票类型"}}),a("el-table-column",{attrs:{prop:"remarkSysUser",align:"center",label:"备注人员"}}),a("el-table-column",{attrs:{prop:"remarkTime",align:"center",label:"备注时间"}}),a("el-table-column",{attrs:{prop:"address",align:"center",width:"160",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return["-1"!=e.$authority.indexOf("invoiceLabel")?a("span",{staticClass:"greenFont tabOperteBtn",on:{click:function(a){return e.getInvoiceType(t.row)}}},[e._v("备注")]):e._e()]}}],null,!1,2135821867)})],1)],1):e._e(),a("div",{staticClass:"el-page"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[10,20,40,50],"page-size":100,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e.dialogComfirmAdvise?a("div",{staticClass:"my-puple"},[a("el-dialog",{attrs:{title:"确认已开发票",visible:e.dialogComfirmAdvise,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"660px","before-close":function(){return e.dialogComfirmAdvise=!1}},on:{"update:visible":function(t){e.dialogComfirmAdvise=t}}},[a("div",{staticClass:"my-puple-contract mb-10"},[a("el-row",{staticStyle:{"font-size":"14px"}},[a("el-col",{attrs:{span:5}},[e._v("备注")]),a("el-col",{attrs:{span:18}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入备注内容(含50个字以内)"},model:{value:e.remark,callback:function(t){e.remark=t},expression:"remark"}})],1)],1),a("el-row",{staticClass:"mt-10",staticStyle:{"font-size":"14px"}},[a("el-col",{staticClass:"is-required-a",attrs:{span:5}},[e._v("是否已开通发票")]),a("el-col",{attrs:{span:18}},[a("el-radio-group",{attrs:{disabled:1==e.clickCellData.state},model:{value:e.isValues,callback:function(t){e.isValues=t},expression:"isValues"}},[a("el-radio",{attrs:{label:1}},[e._v("是")]),a("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1)],1),a("el-row",{staticClass:"mt-10",staticStyle:{"font-size":"14px"}},[a("el-col",{staticClass:"is-required-a",attrs:{span:5}},[e._v("发票种类")]),a("el-col",{attrs:{span:18}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:1==e.clickCellData.state,clearable:"",placeholder:"请选择发票种类"},model:{value:e.sInvoiceTypeValue,callback:function(t){e.sInvoiceTypeValue=t},expression:"sInvoiceTypeValue"}},e._l(e.aInvoiceType,function(e){return a("el-option",{key:e.type,attrs:{label:e.text,value:e.type}})}),1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.notarizeRemark}},[e._v("确定")]),a("el-button",{staticClass:"greenBtn",on:{click:function(t){e.dialogComfirmAdvise=!1}}},[e._v("取消")])],1)])],1):e._e(),e.dialogVisibleSupport?a("div",{staticClass:"my-puple"},[a("el-dialog",{attrs:{title:"添加供应商",visible:e.dialogVisibleSupport,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"660px","before-close":function(){return e.dialogVisibleSupport=!1}},on:{"update:visible":function(t){e.dialogVisibleSupport=t}}},[a("el-row",[a("el-row",{staticClass:"each-item"},[a("el-col",{staticClass:"is-required-a",attrs:{span:8}},[e._v("供应商名称")]),a("el-col",{attrs:{span:12}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入供应商名称",clearable:""},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)],1),a("el-row",{staticClass:"each-item"},[a("el-col",{staticClass:"is-required-a",attrs:{span:8}},[e._v("服务类型")]),a("el-col",{attrs:{span:12}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择服务类型"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),a("el-row",{staticClass:"each-item"},[a("el-col",{staticClass:"is-required-a",attrs:{span:8}},[e._v("供应商联系人")]),a("el-col",{attrs:{span:12}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入供应商联系人",clearable:""},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)],1),a("el-row",{staticClass:"each-item"},[a("el-col",{staticClass:"is-required-a",attrs:{span:8}},[e._v("供应商联系人手机号")]),a("el-col",{attrs:{span:12}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入供应商联系人手机号",clearable:""},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)],1),a("el-row",{staticClass:"each-item"},[a("el-col",{staticClass:"is-required-a",attrs:{span:8}},[e._v("供应商地址")]),a("el-col",{attrs:{span:12}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入供应商地址(30字以内)",clearable:""},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)],1),a("el-row",{staticClass:"each-item"},[a("el-col",{attrs:{span:8}},[e._v("供应商服务内容")]),a("el-col",{attrs:{span:12}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入供应商服务内容(50字以内)",clearable:""},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisibleSupport=!1}}},[e._v("确 定")]),a("el-button",{staticClass:"greenBtn",on:{click:function(t){e.dialogVisibleSupport=!1}}},[e._v("取 消")])],1)],1)],1):e._e(),e.dialogVisibleSupports?a("div",{staticClass:"my-puple"},[a("el-dialog",{attrs:{title:"供应商列表",visible:e.dialogVisibleSupports,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"1200px","before-close":function(){return e.dialogVisibleSupports=!1}},on:{"update:visible":function(t){e.dialogVisibleSupports=t}}},[a("div",{staticClass:"padding: 20px 30px;"},[a("el-table",{key:"look-puple",staticStyle:{width:"100%"},attrs:{data:e.aHomeTableData,border:""}},[a("el-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"80"}}),a("el-table-column",{attrs:{prop:"name",align:"center",label:"供应商名称"}}),a("el-table-column",{attrs:{prop:"address",align:"center",label:"维修次数(含进行中)"}}),a("el-table-column",{attrs:{prop:"outLine",align:"center",label:"服务类型"}}),a("el-table-column",{attrs:{prop:"address",align:"center",label:"服务内容"}}),a("el-table-column",{attrs:{prop:"address",align:"center",label:"供应商地址"}}),a("el-table-column",{attrs:{prop:"address",align:"center",label:"联系人"}}),a("el-table-column",{attrs:{prop:"address",align:"center",label:"联系人人手机号"}}),a("el-table-column",{attrs:{prop:"address",align:"center",label:"更新时间"}}),a("el-table-column",{attrs:{prop:"address",align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"greenFont tabOperteBtn",on:{click:function(t){e.dialogVisibleSupport=!0}}},[e._v("编辑")])]}}],null,!1,3238152318)})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"greenBtn",on:{click:function(t){e.dialogVisibleSupports=!1}}},[e._v("取 消")])],1)])],1):e._e()])},s=[],i=(a("591a"),a("729c")),o=a("f24a"),n=a.n(o),r={name:"application-invoice",components:{VueUeditorWrap:n.a},data(){return{options:[{value:"选项1",label:"黄金糕"},{value:"选项2",label:"双皮奶"}],value:"",value1:[],radio2:1,tableData:[{date:"2016-05-02",name:"水表",outLine:"10",address:"1518 弄"},{date:"2016-05-04",name:"电表",outLine:"6",address:"1515 弄"},{date:"2016-05-04",name:"门禁",outLine:"8",address:"1516 弄"}],dialogComfirmAdvise:!1,dialogVisibleSupport:!1,dialogVisibleSupports:!1,currentPage:1,pageSize:10,TimeStartandEnd:null,PrjectValue:"",aHomeTableData:[],StateList:[],total:0,StateValue:"",aInvoiceType:[],sInvoiceTypeValue:"",isValues:1,remark:"",clickCellData:{},orgLIst:[]}},created(){this.init()},computed:{},mounted(){},methods:{notarizeRemark(){try{let t=this;if(""===t.sInvoiceTypeValue||void 0==t.sInvoiceTypeValue)return void t.$message({message:"发票种类不能为空",type:"warning"});let a={id:t.clickCellData.id,state:t.isValues,invoiceType:t.sInvoiceTypeValue,remark:t.remark};Object(i["Fb"])(a).then(e=>{e.data.result&&(t.$message({showClose:!0,message:e.data.message,type:"success"}),t.getInvoicePage(),t.dialogComfirmAdvise=!1)})}catch(e){console.log(e)}},getInvoiceType(e){try{let a=this;a.clickCellData=e,a.sInvoiceTypeValue=e.invoiceType,a.remark=e.remark,a.aInvoiceType.length<=0&&Object(i["gb"])().then(t=>{a.isValues=1==e.state?e.state:0,a.aInvoiceType=t.data.data}),a.dialogComfirmAdvise=!0}catch(t){console.log(t)}},getInvoicePage(){if(0!=this.orgLIst.length)try{let t=this,a={currentPage:t.currentPage,pageSize:t.pageSize,orgId:t.PrjectValue,state:t.StateValue};t.TimeStartandEnd&&(a.startCreateTime=t.TimeStartandEnd[0],a.endCreateTime=t.TimeStartandEnd[1]),Object(i["eb"])(a).then(e=>{e.data.result&&(e.data.data.content.map((e,t,a)=>{}),t.aHomeTableData=e.data.data.content,t.total=e.data.data.total)})}catch(e){console.log(e)}},getInvoiceStateList(){let e=this;Object(i["fb"])().then(t=>{e.StateList=t.data.data})},getProjects(){this.$store.state.projectList.length<=0&&Object(i["mb"])().then(e=>{e.data.result&&this.$store.commit("setProject",e.data.data)})},getproj(){this.$http.get("/api/invoice/getOrgList").then(e=>{e.data.data.length>0&&(this.orgLIst=e.data.data,this.orgLIst.unshift({orgName:"全部",orgId:""}))}).then(()=>{this.orgLIst.length>0&&(this.getInvoicePage(),this.getInvoiceStateList())}).catch(e=>{console.log(e)})},init(){this.getproj()},handleSizeChange(e){this.currentPage=1,this.pageSize=e,this.getInvoicePage(),console.log(`每页 ${e} 条`)},handleCurrentChange(e){this.currentPage=e,this.getInvoicePage(),console.log(`当前页: ${e}`)}}},c=r,p=(a("b2e7"),a("6691")),u=Object(p["a"])(c,l,s,!1,null,null,null);t["default"]=u.exports},b2e7:function(e,t,a){"use strict";var l=a("cdc8"),s=a.n(l);s.a},cdc8:function(e,t,a){}}]);